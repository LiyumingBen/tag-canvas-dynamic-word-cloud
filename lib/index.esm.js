import{defineComponent as e,reactive as t,onMounted as n,nextTick as a,watch as o,openBlock as i,createElementBlock as l,createElementVNode as d,createCommentVNode as s,pushScopeId as c,popScopeId as r}from"vue";import h from"tag-canvas";const p={shape:"sphere",interval:20,decel:.98,maxSpeed:.02,minSpeed:.01,textHeight:25,outlineMethod:"none",fadeIn:800,outlineColour:"#f96",outlineThickness:2,outlineOffset:4,depth:.92,minBrightness:.2,reverse:!0,shadowBlur:0,shuffleTags:!0,shadowOffset:[0,0],stretchX:1,initial:[.1,.1],textFont:null,textColour:null,weight:!0,weightMode:"size",weightSize:.5,weightSizeMax:25,weightSizeMin:14,weightFrom:"data-weight",wheelZoom:!0,zoomMax:3,zoomMin:.8,zoomStep:.05,tooltip:"div",tooltipClass:"tc-tooltip",freezeActive:!0},u=["#16CAC2","#E79B2E","#16CAC2","#4391FC","#8F4DFF","#4A9452","#FF9C00","#3AC371","#FB5D60"];var g=e({name:"DynamicWordCloudTagCanvas",props:{data:{required:!0,type:Object},canvasId:{type:String,default:"world-cloud-canvas"},labelLength:{type:Number,default:8},colorList:{type:Array,default:()=>u},showValue:{type:Boolean,default:!0},showTooltips:{type:Boolean,default:!0},option:{type:Object,default:()=>{}}},components:{},setup(e,{emit:i}){const l=t({containerRef:null,canvasWidth:0,canvasHeight:0});n((()=>{l.containerRef&&(l.canvasWidth=l.containerRef?.clientWidth,l.canvasHeight=l.containerRef?.clientHeight),a((()=>{d()}))}));const d=t=>{s();let n={...p,...e.option};try{t?h.Update(e.canvasId):h.Start(e.canvasId,"weightTags",n)}catch(e){console.log(e)}},s=()=>{const t=e.colorList;let n=[...e.data];const a=n.length;let o=new DocumentFragment;for(let l=0;l<a;l++){let a=document.createElement("a");const d=n[l].name.length;if(d>e.labelLength){const t=n[l].name.split("").splice(0,e.labelLength);a.innerHTML=d>e.labelLength?t.join("")+"...":t.join("")}else a.innerHTML=n[l].name;a.href="javascript:;return",a.style.color=t[l%t.length],a.title=`${n[l].name}`+(e.showValue?`（${n[l].value}）`:""),n[l].value&&(a.dataset.weight=n[l].value+""),a.onclick=function(e){i("cloud-click",n[l]),e.stopPropagation()},o.append(a)}let l=document.querySelector("#weightTags");l&&(l.innerHTML="",l.append(o))};return o((()=>e.data),(()=>{d(!0)}),{deep:!0}),{state:l}}});const m={ref:"containerRef",class:"dynamic-word-clouds"},f={class:"world-cloud-canvas-wrapper"},v=["id","width","height"],w=(e=>(c("data-v-019946c7"),e=e(),r(),e))((()=>d("div",{style:{display:"none"},id:"weightTags"},null,-1))),y={key:0,class:"tc-tooltip"};function x(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}x(".dynamic-word-clouds[data-v-019946c7] {\n  width: 100%;\n  height: 100%;\n}\n.dynamic-word-clouds[data-v-019946c7] .world-cloud-canvas-wrapper[data-v-019946c7] {\n  width: 100%;\n  height: 100%;\n  min-width: 100px;\n  min-height: 100px;\n}");x("#weightTags {\n  font-size: 12px;\n}\n#weightTags .huge {\n  font-size: 40px;\n}\n#weightTags .large {\n  font-size: 35px;\n}\n#weightTags .medium {\n  font-size: 30px;\n}\n#weightTags .small {\n  font-size: 25px;\n}\n\n.tc-tooltip {\n  border: 1px solid #ddd;\n  background-color: #fff;\n  color: #748095;\n  padding: 4px 8px;\n  max-width: 150px;\n  border-radius: 3px;\n  display: none;\n}"),g.render=function(e,t,n,a,o,c){return i(),l("div",m,[d("div",f,[d("canvas",{id:e.canvasId,width:e.state.canvasWidth,height:e.state.canvasHeight},null,8,v)]),w,e.showTooltips?(i(),l("div",y)):s("v-if",!0)],512)},g.__scopeId="data-v-019946c7",g.__file="packages/dynamic-word-cloud/index.vue",g.install=e=>{e.component(g.name,g)};const T=[g];var C={install:e=>{T.map((t=>e.component(t.name,t)))}};export{g as DynamicWordCloudTagCanvas,C as default};
