{"version":3,"sources":["webpack://index/webpack/universalModuleDefinition","webpack://index/webpack/bootstrap","webpack://index/./packages/dynamic-word-cloud/index.vue?2cc4","webpack://index/./packages/dynamic-word-cloud/index.vue?768b","webpack://index/./node_modules/vue-loader-v16/dist/exportHelper.js","webpack://index/external {\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"root\":\"Vue\"}","webpack://index/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://index/./packages/dynamic-word-cloud/index.vue?afae","webpack://index/./node_modules/tag-canvas/src/tagCanvas.js","webpack://index/./node_modules/tag-canvas/index.js","webpack://index/./packages/dynamic-word-cloud/hooks.ts","webpack://index/./packages/dynamic-word-cloud/index.vue?86b6","webpack://index/./packages/dynamic-word-cloud/index.vue","webpack://index/./packages/dynamic-word-cloud/index.ts","webpack://index/./packages/index.ts","webpack://index/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE__8bbf__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","default","sfc","props","target","__vccOpts","val","window","currentScript","document","src","match","_withScopeId","_pushScopeId","_popScopeId","_hoisted_1","ref","class","_hoisted_2","_hoisted_3","_hoisted_4","_createElementVNode","style","id","_hoisted_5","render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","canvasId","width","state","canvasWidth","height","canvasHeight","showTooltips","_createCommentVNode","j","Oproto","Tproto","TCproto","Mproto","Vproto","TSproto","TCVproto","ocanvas","audio","audioClick","abs","Math","sin","cos","max","min","ceil","sqrt","pow","hexlookup3","hexlookup2","hexlookup1","0","1","2","3","4","5","6","7","8","9","a","A","b","B","C","D","e","E","f","F","doc","handlers","toString","toUpperCase","Defined","IsObject","Clamp","v","mn","mx","isNaN","Nop","TimeNow","Date","valueOf","SortList","nl","tl","length","push","sort","Shuffle","random","SetupAudio","ac","AudioContext","webkitAudioContext","AudioIcon","mute","size","offsetx","offsety","stroke","colour","x","y","w","h","x2","x1","y3","y2","y1","y4","setTransform","globalAlpha","strokeStyle","lineWidth","lineJoin","beginPath","moveTo","lineTo","closePath","Vector","z","MakeVector","lg","lt","PI","Matrix","PointsOnSphere","xr","yr","zr","magic","phi","inc","pts","off","parseFloat","Cylinder","k","Ring","PointsOnCylinderV","PointsOnCylinderH","PointsOnRingV","offset","PointsOnRingH","CentreImage","Image","onload","dx","dy","centreFunc","cx","cy","drawImage","centreImage","SetAlpha","p1","p2","ae","toPrecision","substr","replace","lastIndexOf","indexOf","substring","NewCanvas","G_vmlCanvasManager","createElement","ShadowAlphaBroken","cv","getContext","shadowColor","shadowBlur","strokeRect","getImageData","data","SetGradient","g","gd","createLinearGradient","addColorStop","fillStyle","fillRect","FindGradientColour","tc","gl","weightGradient","gCanvas","TextSet","ctxt","font","strings","padx","pady","shadowColour","shadowOffsets","maxWidth","widths","align","xc","xo","yo","textBaseline","shadowOffsetX","shadowOffsetY","fillText","parseInt","RRect","arcTo","TextCanvas","stringWidths","valign","scale","ExpandImage","ScaleImage","AddBackgroundToImage","othickness","ocolour","padding","radius","ofill","cc","rr","cw","ch","globalCompositeOperation","image","RoundImage","iw","ih","r1","arc","fill","AddShadowToImage","sc","sb","so","sw","sh","FindTextBoundingBox","ht","idata","w1","h1","ex","FixFont","AddHandler","addEventListener","attachEvent","RemoveHandler","removeEventListener","detachEvent","AddImage","mscale","ic","bc","oc","imageScale","complete","txtOpt","zoomMax","txtScale","naturalWidth","naturalHeight","fimage","imageRadius","HasText","shadow","shadowOffset","bgColour","bgOutlineThickness","GetProperty","bgOutline","textColour","outlineMethod","outline","bgRadius","oimage","outlineIncrease","Init","dv","defaultView","pc","charAt","getComputedStyle","getPropertyValue","currentStyle","FindWeight","wFrom","tHeight","getAttribute","EventToCanvasId","srcElement","parentNode","EventXY","xy","xmul","ymul","offsetX","offsetY","AbsPos","changedTouches","pageX","pageY","MouseOut","fromElement","TagCanvas","my","UnFreeze","EndDrag","MouseMove","tg","tttimer","clearTimeout","canvas","Drag","drawn","MouseDown","cb","button","BeginDrag","MouseUp","touchState","Clicked","TouchDown","touches","targetTouches","pinchZoom","BeginPinch","EndPinch","TouchUp","Draw","TouchMove","Pinch","MouseWheel","cancelBubble","returnValue","preventDefault","Wheel","wheelDelta","detail","Scroll","scrollTimer","Pause","setTimeout","Resume","scrollPause","DrawCanvas","DrawCanvasRAF","NextFrame","interval","getElementById","getBoundingClientRect","dd","documentElement","body","xs","pageXOffset","scrollLeft","ys","pageYOffset","scrollTop","clientLeft","clientTop","left","top","Project","sx","sy","z1","z2","TextSplitter","br","line","text","original","innerText","textContent","Outline","ts","tag","pulse","pulsate","pulsateTo","outlineColour","adash","outlineDash","agap","outlineDashSpace","aspeed","outlineDashSpeed","DrawPulsate","DrawSimple","outlineRadius","SetMethod","Tag","col","bcol","bradius","boutline","bothickness","text_original","line_widths","title","position","textFont","alpha","weighted","weight","cid","lctr","opt","raf","cp","initElement","ie","navigator","appVersion","split","insertBefore","removeChild","options","depth","zoom","max_radius","max_weight","min_weight","textHeight","minBrightness","maxBrightness","lx","lock","ly","frozen","fixedAnim","fixedAlpha","source","repeatTags","minTags","GetTags","transform","Identity","startTime","time","Animate","dragControl","AnimateDrag","AnimatePosition","animTiming","Smooth","shadowAlpha","activeAudio","LoadAudio","Load","hideTags","loaded","HideTags","yaw","initial","maxSpeed","pitch","tooltip","ctitle","Tooltip","TooltipNative","TooltipDiv","ttdiv","className","tooltipClass","zIndex","display","appendChild","TooltipNone","noMouse","wheelZoom","started","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","NextFrameRAF","NextFrameTimeout","PinchDistance","t1","t2","tccall","dot","cross","angle","acos","unit","Rotation","u","sina","cosa","mcos","mul","mmatrix","xform","SetImage","iwidth","iheight","ipos","ipad","iscale","ialign","ivalign","Align","space","pos","Create","offx","offy","ix","iy","shadowcv","shadowc","sox","soy","Empty","Lines","cn","cl","childNodes","nodeName","join","nodeType","nodeValue","SplitWidth","words","measureText","om","methods","block","classic","none","funcs","drawFunc","Update","outlineOffset","o2","Ants","ants","l1","l2","g1","g2","seq","setLineDash","DrawOutline","DrawSize","tw","th","oscale","DrawColour","DrawColourText","normal","DrawColourImage","ccanvas","fx","fy","fw","fh","clearRect","save","rect","clip","restore","DrawBlock","ga","useGa","outlineThickness","diff","pulsateTime","Active","PreDraw","PostDraw","LastDraw","Measure","SetShadowColour","SetShadowColourAlpha","SetShadowColourFixed","SetDraw","EqualTo","getElementsByTagName","href","SetAudio","load","DrawImageIE","DrawImage","DrawText","noSelect","CheckActive","MeasureText","wl","soff","twidth","theight","img","tcv","extents","textAlign","textVAlign","imagePosition","imagePadding","imageAlign","imageVAlign","SetFont","boc","SetWeight","modes","weightMode","Weight","wmin","wmax","wnum","nweight","weightSizeMin","weightSizeMax","weightSize","xoff","yoff","xl","im","Calc","pp","mnb","mxb","xformed","stretchX","stretchY","UpdateActive","evt","createEvent","initMouseEvent","dispatchEvent","fireEvent","location","frames","err","open","StopAudio","playing","pause","stopped","PlayAudio","audioOff","gain","sus","track","createMediaElementSource","createGain","connect","destination","paused","resume","audioVolume","currentTime","play","undefined","then","SourceElements","querySelectorAll","el","etl","Message","AddAudio","au","hasAudio","CreateTag","txt","imageMode","splitWidth","UpdateTag","valid","ll","weights","wfrom","weightFrom","shape","shapeArgs","rx","ry","rz","vl","taglist","tagmap","pfuncs","sphere","vcylinder","hcylinder","vring","hring","shuffleTags","radiusX","radiusY","radiusZ","shift","concat","apply","listLength","noTagsMessage","found","ol","newlist","added","removed","splice","pop","SetShadow","ShowAudioIcon","audioIconSize","audioIconThickness","c1","c2","audioIconDark","muted","audioIcon","CheckAudioIcon","ToggleAudio","on","currentAudio","active","fixed","max_sc","tdelta","aindex","last","cursor","frontsel","frontSelect","centreDrawn","AnimateFixed","alert","freezeActive","Freeze","fixedCallback","fixedCallbackTag","activeCursor","SetTTDiv","innerHTML","tooltipDelay","Transform","sp","ym","pm","fa","fadeIn","t0","axis","reverse","freezeDecel","Decel","rs","preFreeze","minSpeed","ay","ap","z0","decel","Zoom","clickToFront","TagToFront","zoomStep","zoomMin","down","dragThreshold","dragging","res","pinched","SetSpeed","FindTag","index","srch","tgt","RotateTag","callback","v1","v2","Volume","vol","Start","Delete","Linear","Reload","speed","lat","lng","tt","iv","0.33","0.66","defaultOption","defaultColor","defineComponent","required","type","String","labelLength","Number","colorList","Array","showValue","Boolean","option","components","setup","emit","reactive","containerRef","onMounted","_state$containerRef","_state$containerRef2","clientWidth","clientHeight","nextTick","startWorldCloud","updateFlag","createTagListDom","console","log","len","fragment","DocumentFragment","charArr","temp","color","dataset","onclick","stopPropagation","append","tagsContainer","querySelector","watch","deep","__exports__","DynamicWordCloudTagCanvas","install","app","component","map"],"mappings":"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","file":"index.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"index\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"index\"] = factory(root[\"Vue\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__8bbf__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fb15\");\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=1&id=7e5ebea8&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=7e5ebea8&lang=scss&scoped=true\"","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8bbf__;","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7e5ebea8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  ref: \"containerRef\",\n  class: \"dynamic-word-clouds\"\n}\nconst _hoisted_2 = { class: \"world-cloud-canvas-wrapper\" }\nconst _hoisted_3 = [\"id\", \"width\", \"height\"]\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\"display\":\"none\"},\n  id: \"weightTags\"\n}, null, -1))\nconst _hoisted_5 = {\n  key: 0,\n  class: \"tc-tooltip\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"canvas\", {\n        id: _ctx.canvasId,\n        width: _ctx.state.canvasWidth,\n        height: _ctx.state.canvasHeight\n      }, null, 8, _hoisted_3)\n    ]),\n    _hoisted_4,\n    (_ctx.showTooltips)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5))\n      : _createCommentVNode(\"\", true)\n  ], 512))\n}","\n\"use strict\";\nvar i, j, abs = Math.abs, sin = Math.sin, cos = Math.cos, max = Math.max,\n    min = Math.min, ceil = Math.ceil, sqrt = Math.sqrt, pow = Math.pow,\n    hexlookup3 = {}, hexlookup2 = {}, hexlookup1 = {\n        0: \"0,\", 1: \"17,\", 2: \"34,\", 3: \"51,\", 4: \"68,\", 5: \"85,\",\n        6: \"102,\", 7: \"119,\", 8: \"136,\", 9: \"153,\", a: \"170,\", A: \"170,\",\n        b: \"187,\", B: \"187,\", c: \"204,\", C: \"204,\", d: \"221,\", D: \"221,\",\n        e: \"238,\", E: \"238,\", f: \"255,\", F: \"255,\"\n    }, Oproto, Tproto, TCproto, Mproto, Vproto, TSproto, TCVproto,\n    doc = document, ocanvas, audio, audioClick, handlers = {};\nfor (i = 0; i < 256; ++i) {\n    j = i.toString(16);\n    if (i < 16)\n        j = '0' + j;\n    hexlookup2[j] = hexlookup2[j.toUpperCase()] = i.toString() + ',';\n}\nfunction Defined(d) {\n    return typeof d != 'undefined';\n}\nfunction IsObject(o) {\n    return typeof o == 'object' && o != null;\n}\nfunction Clamp(v, mn, mx) {\n    return isNaN(v) ? mx : min(mx, max(mn, v));\n}\nfunction Nop() {\n    return false;\n}\nfunction TimeNow() {\n    return new Date().valueOf();\n}\nfunction SortList(l, f) {\n    var nl = [], tl = l.length, i;\n    for (i = 0; i < tl; ++i)\n        nl.push(l[i]);\n    nl.sort(f);\n    return nl;\n}\nfunction Shuffle(a) {\n    var i = a.length - 1, t, p;\n    while (i) {\n        p = ~~(Math.random() * i);\n        t = a[i];\n        a[i] = a[p];\n        a[p] = t;\n        --i;\n    }\n}\nfunction SetupAudio() {\n    var ac = window.AudioContext || window.webkitAudioContext;\n    audio = new ac();\n    if (!audio) {\n        audio = 'off';\n        return;\n    }\n    return audio;\n}\nfunction AudioIcon(mute, c, size, offsetx, offsety, stroke, colour) {\n    var x = offsetx, y = offsety, s = size * 0.01, w = 80 * s, h = 100 * s, d = 40 * s, e = 30 * s;\n    var f = e / 2;\n    var x2 = x + w, x1 = x2 - d;\n    var y3 = y + h, y2 = y3 - e, y1 = y + e, y4 = y + h / 2;\n    c.setTransform(1, 0, 0, 1, 0, 0);\n    c.globalAlpha = 1;\n    c.strokeStyle = colour;\n    c.lineWidth = stroke;\n    c.lineJoin = 'round';\n    c.beginPath();\n    c.moveTo(x1, y1);\n    c.lineTo(x1, y2);\n    c.moveTo(x2, y3);\n    c.lineTo(x1, y2);\n    c.lineTo(x, y2);\n    c.lineTo(x, y1);\n    c.lineTo(x1, y1);\n    c.lineTo(x2, y);\n    if (mute) {\n        c.lineTo(x2, y1);\n        c.moveTo(x2, y2);\n        c.lineTo(x2, y3);\n        c.moveTo(x2 - f, y4 - f);\n        c.lineTo(x2 + f, y4 + f);\n        c.moveTo(x2 + f, y4 - f);\n        c.lineTo(x2 - f, y4 + f);\n        c.stroke();\n        return;\n    }\n    c.closePath();\n    c.stroke();\n}\nfunction Vector(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n}\nVproto = Vector.prototype;\nVproto.length = function () {\n    return sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n};\nVproto.dot = function (v) {\n    return this.x * v.x + this.y * v.y + this.z * v.z;\n};\nVproto.cross = function (v) {\n    var x = this.y * v.z - this.z * v.y,\n        y = this.z * v.x - this.x * v.z,\n        z = this.x * v.y - this.y * v.x;\n    return new Vector(x, y, z);\n};\nVproto.angle = function (v) {\n    var dot = this.dot(v), ac;\n    if (dot == 0)\n        return Math.PI / 2.0;\n    ac = dot / (this.length() * v.length());\n    if (ac >= 1)\n        return 0;\n    if (ac <= -1)\n        return Math.PI;\n    return Math.acos(ac);\n};\nVproto.unit = function () {\n    var l = this.length();\n    return new Vector(this.x / l, this.y / l, this.z / l);\n};\nfunction MakeVector(lg, lt) {\n    lt = lt * Math.PI / 180;\n    lg = lg * Math.PI / 180;\n    var x = sin(lg) * cos(lt), y = -sin(lt), z = -cos(lg) * cos(lt);\n    return new Vector(x, y, z);\n}\nfunction Matrix(a) {\n    this[1] = { 1: a[0], 2: a[1], 3: a[2] };\n    this[2] = { 1: a[3], 2: a[4], 3: a[5] };\n    this[3] = { 1: a[6], 2: a[7], 3: a[8] };\n}\nMproto = Matrix.prototype;\nMatrix.Identity = function () {\n    return new Matrix([1, 0, 0, 0, 1, 0, 0, 0, 1]);\n};\nMatrix.Rotation = function (angle, u) {\n    var sina = sin(angle), cosa = cos(angle), mcos = 1 - cosa;\n    return new Matrix([\n        cosa + pow(u.x, 2) * mcos, u.x * u.y * mcos - u.z * sina, u.x * u.z * mcos + u.y * sina,\n        u.y * u.x * mcos + u.z * sina, cosa + pow(u.y, 2) * mcos, u.y * u.z * mcos - u.x * sina,\n        u.z * u.x * mcos - u.y * sina, u.z * u.y * mcos + u.x * sina, cosa + pow(u.z, 2) * mcos\n    ]);\n}\nMproto.mul = function (m) {\n    var a = [], i, j, mmatrix = (m.xform ? 1 : 0);\n    for (i = 1; i <= 3; ++i)\n        for (j = 1; j <= 3; ++j) {\n            if (mmatrix)\n                a.push(this[i][1] * m[1][j] +\n                    this[i][2] * m[2][j] +\n                    this[i][3] * m[3][j]);\n            else\n                a.push(this[i][j] * m);\n        }\n    return new Matrix(a);\n};\nMproto.xform = function (p) {\n    var a = {}, x = p.x, y = p.y, z = p.z;\n    a.x = x * this[1][1] + y * this[2][1] + z * this[3][1];\n    a.y = x * this[1][2] + y * this[2][2] + z * this[3][2];\n    a.z = x * this[1][3] + y * this[2][3] + z * this[3][3];\n    return a;\n};\nfunction PointsOnSphere(n, xr, yr, zr, magic) {\n    var i, y, r, phi, pts = [], off = 2 / n, inc;\n    inc = Math.PI * (3 - sqrt(5) + (parseFloat(magic) ? parseFloat(magic) : 0));\n    for (i = 0; i < n; ++i) {\n        y = i * off - 1 + (off / 2);\n        r = sqrt(1 - y * y);\n        phi = i * inc;\n        pts.push([cos(phi) * r * xr, y * yr, sin(phi) * r * zr]);\n    }\n    return pts;\n}\nfunction Cylinder(n, o, xr, yr, zr, magic) {\n    var phi, pts = [], off = 2 / n, inc, i, j, k, l;\n    inc = Math.PI * (3 - sqrt(5) + (parseFloat(magic) ? parseFloat(magic) : 0));\n    for (i = 0; i < n; ++i) {\n        j = i * off - 1 + (off / 2);\n        phi = i * inc;\n        k = cos(phi);\n        l = sin(phi);\n        pts.push(o ? [j * xr, k * yr, l * zr] : [k * xr, j * yr, l * zr]);\n    }\n    return pts;\n}\nfunction Ring(o, n, xr, yr, zr, j) {\n    var phi, pts = [], inc = Math.PI * 2 / n, i, k, l;\n    for (i = 0; i < n; ++i) {\n        phi = i * inc;\n        k = cos(phi);\n        l = sin(phi);\n        pts.push(o ? [j * xr, k * yr, l * zr] : [k * xr, j * yr, l * zr]);\n    }\n    return pts;\n}\nfunction PointsOnCylinderV(n, xr, yr, zr, m) { return Cylinder(n, 0, xr, yr, zr, m) }\nfunction PointsOnCylinderH(n, xr, yr, zr, m) { return Cylinder(n, 1, xr, yr, zr, m) }\nfunction PointsOnRingV(n, xr, yr, zr, offset) {\n    offset = isNaN(offset) ? 0 : offset * 1;\n    return Ring(0, n, xr, yr, zr, offset);\n}\nfunction PointsOnRingH(n, xr, yr, zr, offset) {\n    offset = isNaN(offset) ? 0 : offset * 1;\n    return Ring(1, n, xr, yr, zr, offset);\n}\nfunction CentreImage(t) {\n    var i = new Image;\n    i.onload = function () {\n        var dx = i.width / 2, dy = i.height / 2;\n        t.centreFunc = function (c, w, h, cx, cy) {\n            c.setTransform(1, 0, 0, 1, 0, 0);\n            c.globalAlpha = 1;\n            c.drawImage(i, cx - dx, cy - dy);\n        };\n    };\n    i.src = t.centreImage;\n}\nfunction SetAlpha(c, a) {\n    var d = c, p1, p2, ae = (a * 1).toPrecision(3) + ')';\n    if (c[0] === '#') {\n        if (!hexlookup3[c])\n            if (c.length === 4)\n                hexlookup3[c] = 'rgba(' + hexlookup1[c[1]] + hexlookup1[c[2]] + hexlookup1[c[3]];\n            else\n                hexlookup3[c] = 'rgba(' + hexlookup2[c.substr(1, 2)] + hexlookup2[c.substr(3, 2)] + hexlookup2[c.substr(5, 2)];\n        d = hexlookup3[c] + ae;\n    } else if (c.substr(0, 4) === 'rgb(' || c.substr(0, 4) === 'hsl(') {\n        d = (c.replace('(', 'a(').replace(')', ',' + ae));\n    } else if (c.substr(0, 5) === 'rgba(' || c.substr(0, 5) === 'hsla(') {\n        p1 = c.lastIndexOf(',') + 1, p2 = c.indexOf(')');\n        a *= parseFloat(c.substring(p1, p2));\n        d = c.substr(0, p1) + a.toPrecision(3) + ')';\n    }\n    return d;\n}\nfunction NewCanvas(w, h) {\n    // if using excanvas, give up now\n    if (window.G_vmlCanvasManager)\n        return null;\n    var c = doc.createElement('canvas');\n    c.width = w;\n    c.height = h;\n    return c;\n}\n// I think all browsers pass this test now...\nfunction ShadowAlphaBroken() {\n    var cv = NewCanvas(3, 3), c, i;\n    if (!cv)\n        return false;\n    c = cv.getContext('2d');\n    c.strokeStyle = '#000';\n    c.shadowColor = '#fff';\n    c.shadowBlur = 3;\n    c.globalAlpha = 0;\n    c.strokeRect(2, 2, 2, 2);\n    c.globalAlpha = 1;\n    i = c.getImageData(2, 2, 1, 1);\n    cv = null;\n    return (i.data[0] > 0);\n}\nfunction SetGradient(c, l, o, g) {\n    var gd = c.createLinearGradient(0, 0, l, 0), i;\n    for (i in g)\n        gd.addColorStop(1 - i, g[i]);\n    c.fillStyle = gd;\n    c.fillRect(0, o, l, 1);\n}\nfunction FindGradientColour(tc, p, r) {\n    var l = 1024, h = 1, gl = tc.weightGradient, cv, c, i, d;\n    if (tc.gCanvas) {\n        c = tc.gCanvas.getContext('2d');\n        h = tc.gCanvas.height;\n    } else {\n        if (IsObject(gl[0]))\n            h = gl.length;\n        else\n            gl = [gl];\n        tc.gCanvas = cv = NewCanvas(l, h);\n        if (!cv)\n            return null;\n        c = cv.getContext('2d');\n        for (i = 0; i < h; ++i)\n            SetGradient(c, l, i, gl[i]);\n    }\n    r = max(min(r || 0, h - 1), 0);\n    d = c.getImageData(~~((l - 1) * p), r, 1, 1).data;\n    return 'rgba(' + d[0] + ',' + d[1] + ',' + d[2] + ',' + (d[3] / 255) + ')';\n}\nfunction TextSet(ctxt, font, colour, strings, padx, pady, shadowColour,\n    shadowBlur, shadowOffsets, maxWidth, widths, align) {\n    var xo = padx + (shadowBlur || 0) +\n        (shadowOffsets.length && shadowOffsets[0] < 0 ? abs(shadowOffsets[0]) : 0),\n        yo = pady + (shadowBlur || 0) +\n            (shadowOffsets.length && shadowOffsets[1] < 0 ? abs(shadowOffsets[1]) : 0), i, xc;\n    ctxt.font = font;\n    ctxt.textBaseline = 'top';\n    ctxt.fillStyle = colour;\n    shadowColour && (ctxt.shadowColor = shadowColour);\n    shadowBlur && (ctxt.shadowBlur = shadowBlur);\n    shadowOffsets.length && (ctxt.shadowOffsetX = shadowOffsets[0],\n        ctxt.shadowOffsetY = shadowOffsets[1]);\n    for (i = 0; i < strings.length; ++i) {\n        xc = 0;\n        if (widths) {\n            if ('right' == align) {\n                xc = maxWidth - widths[i];\n            } else if ('centre' == align) {\n                xc = (maxWidth - widths[i]) / 2;\n            }\n        }\n        ctxt.fillText(strings[i], xo + xc, yo);\n        yo += parseInt(font);\n    }\n}\nfunction RRect(c, x, y, w, h, r, s) {\n    if (r) {\n        c.beginPath();\n        c.moveTo(x, y + h - r);\n        c.arcTo(x, y, x + r, y, r);\n        c.arcTo(x + w, y, x + w, y + r, r);\n        c.arcTo(x + w, y + h, x + w - r, y + h, r);\n        c.arcTo(x, y + h, x, y + h - r, r);\n        c.closePath();\n        c[s ? 'stroke' : 'fill']();\n    } else {\n        c[s ? 'strokeRect' : 'fillRect'](x, y, w, h);\n    }\n}\nfunction TextCanvas(strings, font, w, h, maxWidth, stringWidths, align, valign,\n    scale) {\n    this.strings = strings;\n    this.font = font;\n    this.width = w;\n    this.height = h;\n    this.maxWidth = maxWidth;\n    this.stringWidths = stringWidths;\n    this.align = align;\n    this.valign = valign;\n    this.scale = scale;\n}\nTCVproto = TextCanvas.prototype;\nTCVproto.SetImage = function (image, w, h, position, padding, align, valign,\n    scale) {\n    this.image = image;\n    this.iwidth = w * this.scale;\n    this.iheight = h * this.scale;\n    this.ipos = position;\n    this.ipad = padding * this.scale;\n    this.iscale = scale;\n    this.ialign = align;\n    this.ivalign = valign;\n};\nTCVproto.Align = function (size, space, a) {\n    var pos = 0;\n    if (a == 'right' || a == 'bottom')\n        pos = space - size;\n    else if (a != 'left' && a != 'top')\n        pos = (space - size) / 2;\n    return pos;\n};\nTCVproto.Create = function (colour, bgColour, bgOutline, bgOutlineThickness,\n    shadowColour, shadowBlur, shadowOffsets, padding, radius) {\n    var cv, cw, ch, c, x1, x2, y1, y2, offx, offy, ix, iy, iw, ih, rr,\n        sox = abs(shadowOffsets[0]), soy = abs(shadowOffsets[1]), shadowcv, shadowc;\n    padding = max(padding, sox + shadowBlur, soy + shadowBlur);\n    x1 = 2 * (padding + bgOutlineThickness);\n    y1 = 2 * (padding + bgOutlineThickness);\n    cw = this.width + x1;\n    ch = this.height + y1;\n    offx = offy = padding + bgOutlineThickness;\n\n    if (this.image) {\n        ix = iy = padding + bgOutlineThickness;\n        iw = this.iwidth;\n        ih = this.iheight;\n        if (this.ipos == 'top' || this.ipos == 'bottom') {\n            if (iw < this.width)\n                ix += this.Align(iw, this.width, this.ialign);\n            else\n                offx += this.Align(this.width, iw, this.align);\n            if (this.ipos == 'top')\n                offy += ih + this.ipad;\n            else\n                iy += this.height + this.ipad;\n            cw = max(cw, iw + x1);\n            ch += ih + this.ipad;\n        } else {\n            if (ih < this.height)\n                iy += this.Align(ih, this.height, this.ivalign);\n            else\n                offy += this.Align(this.height, ih, this.valign);\n            if (this.ipos == 'right')\n                ix += this.width + this.ipad;\n            else\n                offx += iw + this.ipad;\n            cw += iw + this.ipad;\n            ch = max(ch, ih + y1);\n        }\n    }\n\n    cv = NewCanvas(cw, ch);\n    if (!cv)\n        return null;\n    x1 = y1 = bgOutlineThickness / 2;\n    x2 = cw - bgOutlineThickness;\n    y2 = ch - bgOutlineThickness;\n    rr = min(radius, x2 / 2, y2 / 2);\n    c = cv.getContext('2d');\n    if (bgColour) {\n        c.fillStyle = bgColour;\n        RRect(c, x1, y1, x2, y2, rr);\n    }\n    if (bgOutlineThickness) {\n        c.strokeStyle = bgOutline;\n        c.lineWidth = bgOutlineThickness;\n        RRect(c, x1, y1, x2, y2, rr, true);\n    }\n    if (shadowBlur || sox || soy) {\n        // use a transparent canvas to draw on\n        shadowcv = NewCanvas(cw, ch);\n        if (shadowcv) {\n            shadowc = c;\n            c = shadowcv.getContext('2d');\n        }\n    }\n\n    // don't use TextSet shadow support because it adds space for shadow\n    TextSet(c, this.font, colour, this.strings, offx, offy, 0, 0, [],\n        this.maxWidth, this.stringWidths, this.align);\n\n    if (this.image)\n        c.drawImage(this.image, ix, iy, iw, ih);\n\n    if (shadowc) {\n        // draw the text and image with the added shadow\n        c = shadowc;\n        shadowColour && (c.shadowColor = shadowColour);\n        shadowBlur && (c.shadowBlur = shadowBlur);\n        c.shadowOffsetX = shadowOffsets[0];\n        c.shadowOffsetY = shadowOffsets[1];\n        c.drawImage(shadowcv, 0, 0);\n    }\n    return cv;\n};\nfunction ExpandImage(i, w, h) {\n    var cv = NewCanvas(w, h), c;\n    if (!cv)\n        return null;\n    c = cv.getContext('2d');\n    c.drawImage(i, (w - i.width) / 2, (h - i.height) / 2);\n    return cv;\n}\nfunction ScaleImage(i, w, h) {\n    var cv = NewCanvas(w, h), c;\n    if (!cv)\n        return null;\n    c = cv.getContext('2d');\n    c.drawImage(i, 0, 0, w, h);\n    return cv;\n}\nfunction AddBackgroundToImage(i, w, h, scale, colour, othickness, ocolour,\n    padding, radius, ofill) {\n    var cw = w + ((2 * padding) + othickness) * scale,\n        ch = h + ((2 * padding) + othickness) * scale,\n        cv = NewCanvas(cw, ch), c, x1, y1, x2, y2, ocanvas, cc, rr;\n    if (!cv)\n        return null;\n    othickness *= scale;\n    radius *= scale;\n    x1 = y1 = othickness / 2;\n    x2 = cw - othickness;\n    y2 = ch - othickness;\n    padding = (padding * scale) + x1; // add space for outline\n    c = cv.getContext('2d');\n    rr = min(radius, x2 / 2, y2 / 2);\n    if (colour) {\n        c.fillStyle = colour;\n        RRect(c, x1, y1, x2, y2, rr);\n    }\n    if (othickness) {\n        c.strokeStyle = ocolour;\n        c.lineWidth = othickness;\n        RRect(c, x1, y1, x2, y2, rr, true);\n    }\n\n    if (ofill) {\n        // use compositing to colour in the image and border\n        ocanvas = NewCanvas(cw, ch);\n        cc = ocanvas.getContext('2d');\n        cc.drawImage(i, padding, padding, w, h);\n        cc.globalCompositeOperation = 'source-in';\n        cc.fillStyle = ocolour;\n        cc.fillRect(0, 0, cw, ch);\n        cc.globalCompositeOperation = 'destination-over';\n        cc.drawImage(cv, 0, 0);\n        cc.globalCompositeOperation = 'source-over';\n        c.drawImage(ocanvas, 0, 0);\n    } else {\n        c.drawImage(i, padding, padding, i.width, i.height);\n    }\n    return { image: cv, width: cw / scale, height: ch / scale };\n}\n/**\n * Rounds off the corners of an image\n */\nfunction RoundImage(i, r, iw, ih, s) {\n    var cv, c, r1 = parseFloat(r), l = max(iw, ih);\n    cv = NewCanvas(iw, ih);\n    if (!cv)\n        return null;\n    if (r.indexOf('%') > 0)\n        r1 = l * r1 / 100;\n    else\n        r1 = r1 * s;\n    c = cv.getContext('2d');\n    c.globalCompositeOperation = 'source-over';\n    c.fillStyle = '#fff';\n    if (r1 >= l / 2) {\n        r1 = min(iw, ih) / 2;\n        c.beginPath();\n        c.moveTo(iw / 2, ih / 2);\n        c.arc(iw / 2, ih / 2, r1, 0, 2 * Math.PI, false);\n        c.fill();\n        c.closePath();\n    } else {\n        r1 = min(iw / 2, ih / 2, r1);\n        RRect(c, 0, 0, iw, ih, r1, true);\n        c.fill();\n    }\n    c.globalCompositeOperation = 'source-in';\n    c.drawImage(i, 0, 0, iw, ih);\n    return cv;\n}\n/**\n * Creates a new canvas containing the image and its shadow\n * Returns an object containing the image and its dimensions at z=0\n */\nfunction AddShadowToImage(i, w, h, scale, sc, sb, so) {\n    var sw = abs(so[0]), sh = abs(so[1]),\n        cw = w + (sw > sb ? sw + sb : sb * 2) * scale,\n        ch = h + (sh > sb ? sh + sb : sb * 2) * scale,\n        xo = scale * ((sb || 0) + (so[0] < 0 ? sw : 0)),\n        yo = scale * ((sb || 0) + (so[1] < 0 ? sh : 0)), cv, c;\n    cv = NewCanvas(cw, ch);\n    if (!cv)\n        return null;\n    c = cv.getContext('2d');\n    sc && (c.shadowColor = sc);\n    sb && (c.shadowBlur = sb * scale);\n    so && (c.shadowOffsetX = so[0] * scale, c.shadowOffsetY = so[1] * scale);\n    c.drawImage(i, xo, yo, w, h);\n    return { image: cv, width: cw / scale, height: ch / scale };\n}\nfunction FindTextBoundingBox(s, f, ht) {\n    var w = parseInt(s.toString().length * ht), h = parseInt(ht * 2 * s.length),\n        cv = NewCanvas(w, h), c, idata, w1, h1, x, y, i, ex;\n    if (!cv)\n        return null;\n    c = cv.getContext('2d');\n    c.fillStyle = '#000';\n    c.fillRect(0, 0, w, h);\n    TextSet(c, ht + 'px ' + f, '#fff', s, 0, 0, 0, 0, [], 'centre')\n\n    idata = c.getImageData(0, 0, w, h);\n    w1 = idata.width; h1 = idata.height;\n    ex = {\n        min: { x: w1, y: h1 },\n        max: { x: -1, y: -1 }\n    };\n    for (y = 0; y < h1; ++y) {\n        for (x = 0; x < w1; ++x) {\n            i = (y * w1 + x) * 4;\n            if (idata.data[i + 1] > 0) {\n                if (x < ex.min.x) ex.min.x = x;\n                if (x > ex.max.x) ex.max.x = x;\n                if (y < ex.min.y) ex.min.y = y;\n                if (y > ex.max.y) ex.max.y = y;\n            }\n        }\n    }\n    // device pixels might not be css pixels\n    if (w1 != w) {\n        ex.min.x *= (w / w1);\n        ex.max.x *= (w / w1);\n    }\n    if (h1 != h) {\n        ex.min.y *= (w / h1);\n        ex.max.y *= (w / h1);\n    }\n\n    cv = null;\n    return ex;\n}\nfunction FixFont(f) {\n    return \"'\" + f.replace(/(\\'|\\\")/g, '').replace(/\\s*,\\s*/g, \"', '\") + \"'\";\n}\nfunction AddHandler(h, f, e) {\n    e = e || doc;\n    if (e.addEventListener)\n        e.addEventListener(h, f, false);\n    else\n        e.attachEvent('on' + h, f);\n}\nfunction RemoveHandler(h, f, e) {\n    e = e || doc;\n    if (e.removeEventListener)\n        e.removeEventListener(h, f);\n    else\n        e.detachEvent('on' + h, f);\n}\nfunction AddImage(i, o, t, tc) {\n    var s = tc.imageScale, mscale, ic, bc, oc, iw, ih;\n    // image not loaded, wait for image onload\n    if (!o.complete)\n        return AddHandler('load', function () { AddImage(i, o, t, tc); }, o);\n    if (!i.complete)\n        return AddHandler('load', function () { AddImage(i, o, t, tc); }, i);\n\n    // Yes, this does look like nonsense, but it makes sure that both the\n    // width and height are actually set and not just calculated. This is\n    // required to keep proportional sizes when the images are hidden, so\n    // the images can be used again for another cloud.\n    o.width = o.width;\n    o.height = o.height;\n\n    if (s) {\n        i.width = o.width * s;\n        i.height = o.height * s;\n    }\n    // the standard width of the image, with imageScale applied\n    t.iw = i.width;\n    t.ih = i.height;\n    if (tc.txtOpt) {\n        ic = i;\n        mscale = tc.zoomMax * tc.txtScale;\n        iw = t.iw * mscale;\n        ih = t.ih * mscale;\n        if (iw < o.naturalWidth || ih < o.naturalHeight) {\n            ic = ScaleImage(i, iw, ih);\n            if (ic)\n                t.fimage = ic;\n        } else {\n            iw = t.iw;\n            ih = t.ih;\n            mscale = 1;\n        }\n        if (parseFloat(tc.imageRadius))\n            t.image = t.fimage = i = RoundImage(t.image, tc.imageRadius, iw, ih, mscale);\n        if (!t.HasText()) {\n            if (tc.shadow) {\n                ic = AddShadowToImage(t.image, iw, ih, mscale, tc.shadow, tc.shadowBlur,\n                    tc.shadowOffset);\n                if (ic) {\n                    t.fimage = ic.image;\n                    t.w = ic.width;\n                    t.h = ic.height;\n                }\n            }\n            if (tc.bgColour || tc.bgOutlineThickness) {\n                bc = tc.bgColour == 'tag' ? GetProperty(t.a, 'background-color') :\n                    tc.bgColour;\n                oc = tc.bgOutline == 'tag' ? GetProperty(t.a, 'color') :\n                    (tc.bgOutline || tc.textColour);\n                iw = t.fimage.width;\n                ih = t.fimage.height;\n                if (tc.outlineMethod == 'colour') {\n                    // create the outline version first, using the current image state\n                    ic = AddBackgroundToImage(t.fimage, iw, ih, mscale, bc,\n                        tc.bgOutlineThickness, t.outline.colour, tc.padding, tc.bgRadius, 1);\n                    if (ic)\n                        t.oimage = ic.image;\n                }\n                ic = AddBackgroundToImage(t.fimage, iw, ih, mscale, bc,\n                    tc.bgOutlineThickness, oc, tc.padding, tc.bgRadius);\n                if (ic) {\n                    t.fimage = ic.image;\n                    t.w = ic.width;\n                    t.h = ic.height;\n                }\n            }\n            if (tc.outlineMethod == 'size') {\n                if (tc.outlineIncrease > 0) {\n                    t.iw += 2 * tc.outlineIncrease;\n                    t.ih += 2 * tc.outlineIncrease;\n                    iw = mscale * t.iw;\n                    ih = mscale * t.ih;\n                    ic = ScaleImage(t.fimage, iw, ih);\n                    t.oimage = ic;\n                    t.fimage = ExpandImage(t.fimage, t.oimage.width, t.oimage.height);\n                } else {\n                    iw = mscale * (t.iw + (2 * tc.outlineIncrease));\n                    ih = mscale * (t.ih + (2 * tc.outlineIncrease));\n                    ic = ScaleImage(t.fimage, iw, ih);\n                    t.oimage = ExpandImage(ic, t.fimage.width, t.fimage.height);\n                }\n            }\n        }\n    }\n    t.Init();\n}\nfunction GetProperty(e, p) {\n    var dv = doc.defaultView, pc = p.replace(/\\-([a-z])/g, function (a) { return a.charAt(1).toUpperCase() });\n    return (dv && dv.getComputedStyle && dv.getComputedStyle(e, null).getPropertyValue(p)) ||\n        (e.currentStyle && e.currentStyle[pc]);\n}\nfunction FindWeight(a, wFrom, tHeight) {\n    var w = 1, p;\n    if (wFrom) {\n        w = 1 * (a.getAttribute(wFrom) || tHeight);\n    } else if (p = GetProperty(a, 'font-size')) {\n        w = (p.indexOf('px') > -1 && p.replace('px', '') * 1) ||\n            (p.indexOf('pt') > -1 && p.replace('pt', '') * 1.25) ||\n            p * 3.3;\n    }\n    return w;\n}\nfunction EventToCanvasId(e) {\n    return e.target && Defined(e.target.id) ? e.target.id :\n        e.srcElement.parentNode.id;\n}\nfunction EventXY(e, c) {\n    var xy, p, xmul = parseInt(GetProperty(c, 'width')) / c.width,\n        ymul = parseInt(GetProperty(c, 'height')) / c.height;\n    if (Defined(e.offsetX)) {\n        xy = { x: e.offsetX, y: e.offsetY };\n    } else {\n        p = AbsPos(c.id);\n        if (Defined(e.changedTouches))\n            e = e.changedTouches[0];\n        if (e.pageX)\n            xy = { x: e.pageX - p.x, y: e.pageY - p.y };\n    }\n    if (xy && xmul && ymul) {\n        xy.x /= xmul;\n        xy.y /= ymul;\n    }\n    return xy;\n}\nfunction MouseOut(e) {\n    var cv = e.target || e.fromElement.parentNode, tc = TagCanvas.tc[cv.id];\n    if (tc) {\n        tc.mx = tc.my = -1;\n        tc.UnFreeze();\n        tc.EndDrag();\n    }\n}\nfunction MouseMove(e) {\n    var i, t = TagCanvas, tc, p, tg = EventToCanvasId(e);\n    for (i in t.tc) {\n        tc = t.tc[i];\n        if (tc.tttimer) {\n            clearTimeout(tc.tttimer);\n            tc.tttimer = null;\n        }\n    }\n    if (tg && t.tc[tg]) {\n        tc = t.tc[tg];\n        if (p = EventXY(e, tc.canvas)) {\n            tc.mx = p.x;\n            tc.my = p.y;\n            tc.Drag(e, p);\n        }\n        tc.drawn = 0;\n    }\n}\nfunction MouseDown(e) {\n    var t = TagCanvas, cb = doc.addEventListener ? 0 : 1,\n        tg = EventToCanvasId(e);\n    if (tg && e.button == cb && t.tc[tg]) {\n        t.tc[tg].BeginDrag(e);\n    }\n}\nfunction MouseUp(e) {\n    var t = TagCanvas, cb = doc.addEventListener ? 0 : 1,\n        tg = EventToCanvasId(e), tc;\n    if (tg && e.button == cb && t.tc[tg]) {\n        tc = t.tc[tg];\n        MouseMove(e);\n        if (!tc.EndDrag() && !tc.touchState)\n            tc.Clicked(e);\n    }\n}\nfunction TouchDown(e) {\n    var tg = EventToCanvasId(e), tc = (tg && TagCanvas.tc[tg]), p;\n    if (tc && e.changedTouches) {\n        if (e.touches.length == 1 && tc.touchState == 0) {\n            tc.touchState = 1;\n            tc.BeginDrag(e);\n            if (p = EventXY(e, tc.canvas)) {\n                tc.mx = p.x;\n                tc.my = p.y;\n                tc.drawn = 0;\n            }\n        } else if (e.targetTouches.length == 2 && tc.pinchZoom) {\n            tc.touchState = 3;\n            tc.EndDrag();\n            tc.BeginPinch(e);\n        } else {\n            tc.EndDrag();\n            tc.EndPinch();\n            tc.touchState = 0;\n        }\n    }\n}\nfunction TouchUp(e) {\n    var tg = EventToCanvasId(e), tc = (tg && TagCanvas.tc[tg]);\n    if (tc && e.changedTouches) {\n        switch (tc.touchState) {\n            case 1:\n                tc.Draw();\n                tc.Clicked();\n                break;\n            case 2:\n                tc.EndDrag();\n                break;\n            case 3:\n                tc.EndPinch();\n        }\n        tc.touchState = 0;\n    }\n}\nfunction TouchMove(e) {\n    var i, t = TagCanvas, tc, p, tg = EventToCanvasId(e);\n    for (i in t.tc) {\n        tc = t.tc[i];\n        if (tc.tttimer) {\n            clearTimeout(tc.tttimer);\n            tc.tttimer = null;\n        }\n    }\n    tc = (tg && t.tc[tg]);\n    if (tc && e.changedTouches && tc.touchState) {\n        switch (tc.touchState) {\n            case 1:\n            case 2:\n                if (p = EventXY(e, tc.canvas)) {\n                    tc.mx = p.x;\n                    tc.my = p.y;\n                    if (tc.Drag(e, p))\n                        tc.touchState = 2;\n                }\n                break;\n            case 3:\n                tc.Pinch(e);\n        }\n        tc.drawn = 0;\n    }\n}\nfunction MouseWheel(e) {\n    var t = TagCanvas, tg = EventToCanvasId(e);\n    if (tg && t.tc[tg]) {\n        e.cancelBubble = true;\n        e.returnValue = false;\n        e.preventDefault && e.preventDefault();\n        t.tc[tg].Wheel((e.wheelDelta || e.detail) > 0);\n    }\n}\nfunction Scroll(e) {\n    var i, t = TagCanvas;\n    clearTimeout(t.scrollTimer);\n    for (i in t.tc) {\n        t.tc[i].Pause();\n    }\n    t.scrollTimer = setTimeout(function () {\n        var i, t = TagCanvas;\n        for (i in t.tc) {\n            t.tc[i].Resume();\n        }\n    }, t.scrollPause);\n}\nfunction DrawCanvas() {\n    DrawCanvasRAF(TimeNow());\n}\nfunction DrawCanvasRAF(t) {\n    var tc = TagCanvas.tc, i;\n    TagCanvas.NextFrame(TagCanvas.interval);\n    t = t || TimeNow();\n    for (i in tc)\n        tc[i].Draw(t);\n}\nfunction AbsPos(id) {\n    var e = doc.getElementById(id), r = e.getBoundingClientRect(),\n        dd = doc.documentElement, b = doc.body, w = window,\n        xs = w.pageXOffset || dd.scrollLeft,\n        ys = w.pageYOffset || dd.scrollTop,\n        xo = dd.clientLeft || b.clientLeft,\n        yo = dd.clientTop || b.clientTop;\n    return { x: r.left + xs - xo, y: r.top + ys - yo };\n}\nfunction Project(tc, p1, sx, sy) {\n    var m = tc.radius * tc.z1 / (tc.z1 + tc.z2 + p1.z);\n    return {\n        x: p1.x * m * sx,\n        y: p1.y * m * sy,\n        z: p1.z,\n        w: (tc.z1 - p1.z) / tc.z2\n    };\n}\n/**\n * @constructor\n * for recursively splitting tag contents on <br> tags\n */\nfunction TextSplitter(e) {\n    this.e = e;\n    this.br = 0;\n    this.line = [];\n    this.text = [];\n    this.original = e.innerText || e.textContent;\n}\nTSproto = TextSplitter.prototype;\nTSproto.Empty = function () {\n    for (var i = 0; i < this.text.length; ++i)\n        if (this.text[i].length)\n            return false;\n    return true;\n};\nTSproto.Lines = function (e) {\n    var r = e ? 1 : 0, cn, cl, i;\n    e = e || this.e;\n    cn = e.childNodes;\n    cl = cn.length;\n\n    for (i = 0; i < cl; ++i) {\n        if (cn[i].nodeName == 'BR') {\n            this.text.push(this.line.join(' '));\n            this.br = 1;\n        } else if (cn[i].nodeType == 3) {\n            if (this.br) {\n                this.line = [cn[i].nodeValue];\n                this.br = 0;\n            } else {\n                this.line.push(cn[i].nodeValue);\n            }\n        } else {\n            this.Lines(cn[i]);\n        }\n    }\n    r || this.br || this.text.push(this.line.join(' '));\n    return this.text;\n};\nTSproto.SplitWidth = function (w, c, f, h) {\n    var i, j, words, text = [];\n    c.font = h + 'px ' + f;\n    for (i = 0; i < this.text.length; ++i) {\n        words = this.text[i].split(/\\s+/);\n        this.line = [words[0]];\n        for (j = 1; j < words.length; ++j) {\n            if (c.measureText(this.line.join(' ') + ' ' + words[j]).width > w) {\n                text.push(this.line.join(' '));\n                this.line = [words[j]];\n            } else {\n                this.line.push(words[j]);\n            }\n        }\n        text.push(this.line.join(' '));\n    }\n    return this.text = text;\n};\n/**\n * @constructor\n */\nfunction Outline(tc, t) {\n    this.ts = null;\n    this.tc = tc;\n    this.tag = t;\n    this.x = this.y = this.w = this.h = this.sc = 1;\n    this.z = 0;\n    this.pulse = 1;\n    this.pulsate = tc.pulsateTo < 1;\n    this.colour = tc.outlineColour;\n    this.adash = ~~tc.outlineDash;\n    this.agap = ~~tc.outlineDashSpace || this.adash;\n    this.aspeed = tc.outlineDashSpeed * 1;\n    if (this.colour == 'tag')\n        this.colour = GetProperty(t.a, 'color');\n    else if (this.colour == 'tagbg')\n        this.colour = GetProperty(t.a, 'background-color');\n    this.Draw = this.pulsate ? this.DrawPulsate : this.DrawSimple;\n    this.radius = tc.outlineRadius | 0;\n    this.SetMethod(tc.outlineMethod);\n}\nOproto = Outline.prototype;\nOproto.SetMethod = function (om) {\n    var methods = {\n        block: ['PreDraw', 'DrawBlock'],\n        colour: ['PreDraw', 'DrawColour'],\n        outline: ['PostDraw', 'DrawOutline'],\n        classic: ['LastDraw', 'DrawOutline'],\n        size: ['PreDraw', 'DrawSize'],\n        none: ['LastDraw']\n    }, funcs = methods[om] || methods.outline;\n    if (om == 'none') {\n        this.Draw = function () { return 1; }\n    } else {\n        this.drawFunc = this[funcs[1]];\n    }\n    this[funcs[0]] = this.Draw;\n};\nOproto.Update = function (x, y, w, h, sc, z, xo, yo) {\n    var o = this.tc.outlineOffset, o2 = 2 * o;\n    this.x = sc * x + xo - o;\n    this.y = sc * y + yo - o;\n    this.w = sc * w + o2;\n    this.h = sc * h + o2;\n    this.sc = sc; // used to determine frontmost\n    this.z = z;\n};\nOproto.Ants = function (c) {\n    if (!this.adash)\n        return;\n    var l = this.adash, g = this.agap, s = this.aspeed, length = l + g,\n        l1 = 0, l2 = l, g1 = g, g2 = 0, seq = 0, ants;\n    if (s) {\n        seq = abs(s) * (TimeNow() - this.ts) / 50;\n        if (s < 0)\n            seq = 8.64e6 - seq;\n        s = ~~seq % length;\n    }\n    if (s) {\n        if (l >= s) {\n            l1 = l - s;\n            l2 = s;\n        } else {\n            g1 = length - s;\n            g2 = g - g1;\n        }\n        ants = [l1, g1, l2, g2];\n    } else {\n        ants = [l, g];\n    }\n    c.setLineDash(ants);\n}\nOproto.DrawOutline = function (c, x, y, w, h, colour) {\n    var r = min(this.radius, h / 2, w / 2);\n    c.strokeStyle = colour;\n    this.Ants(c);\n    RRect(c, x, y, w, h, r, true);\n};\nOproto.DrawSize = function (c, x, y, w, h, colour, tag, x1, y1) {\n    var tw = tag.w, th = tag.h, m, i, sc;\n    if (this.pulsate) {\n        if (tag.image)\n            sc = (tag.image.height + this.tc.outlineIncrease) / tag.image.height;\n        else\n            sc = tag.oscale;\n        i = tag.fimage || tag.image;\n        m = 1 + ((sc - 1) * (1 - this.pulse));\n        tag.h *= m;\n        tag.w *= m;\n    } else {\n        i = tag.oimage;\n    }\n    tag.alpha = 1;\n    tag.Draw(c, x1, y1, i);\n    tag.h = th;\n    tag.w = tw;\n    return 1;\n};\nOproto.DrawColour = function (c, x, y, w, h, colour, tag, x1, y1) {\n    if (tag.oimage) {\n        if (this.pulse < 1) {\n            tag.alpha = 1 - pow(this.pulse, 2);\n            tag.Draw(c, x1, y1, tag.fimage);\n            tag.alpha = this.pulse;\n        } else {\n            tag.alpha = 1;\n        }\n        tag.Draw(c, x1, y1, tag.oimage);\n        return 1;\n    }\n    return this[tag.image ? 'DrawColourImage' : 'DrawColourText'](c, x, y, w, h, colour, tag, x1, y1);\n};\nOproto.DrawColourText = function (c, x, y, w, h, colour, tag, x1, y1) {\n    var normal = tag.colour;\n    tag.colour = colour;\n    tag.alpha = 1;\n    tag.Draw(c, x1, y1);\n    tag.colour = normal;\n    return 1;\n};\nOproto.DrawColourImage = function (c, x, y, w, h, colour, tag, x1, y1) {\n    var ccanvas = c.canvas, fx = ~~max(x, 0), fy = ~~max(y, 0),\n        fw = min(ccanvas.width - fx, w) + .5 | 0, fh = min(ccanvas.height - fy, h) + .5 | 0, cc;\n    if (ocanvas)\n        ocanvas.width = fw, ocanvas.height = fh;\n    else\n        ocanvas = NewCanvas(fw, fh);\n    if (!ocanvas)\n        return this.SetMethod('outline'); // if using IE and images, give up!\n    cc = ocanvas.getContext('2d');\n\n    cc.drawImage(ccanvas, fx, fy, fw, fh, 0, 0, fw, fh);\n    c.clearRect(fx, fy, fw, fh);\n    if (this.pulsate) {\n        tag.alpha = 1 - pow(this.pulse, 2);\n    } else {\n        tag.alpha = 1;\n    }\n    tag.Draw(c, x1, y1);\n    c.setTransform(1, 0, 0, 1, 0, 0);\n    c.save();\n    c.beginPath();\n    c.rect(fx, fy, fw, fh);\n    c.clip();\n    c.globalCompositeOperation = 'source-in';\n    c.fillStyle = colour;\n    c.fillRect(fx, fy, fw, fh);\n    c.restore();\n    c.globalAlpha = 1;\n    c.globalCompositeOperation = 'destination-over';\n    c.drawImage(ocanvas, 0, 0, fw, fh, fx, fy, fw, fh);\n    c.globalCompositeOperation = 'source-over';\n    return 1;\n};\nOproto.DrawBlock = function (c, x, y, w, h, colour) {\n    var r = min(this.radius, h / 2, w / 2);\n    c.fillStyle = colour;\n    RRect(c, x, y, w, h, r);\n};\nOproto.DrawSimple = function (c, tag, x1, y1, ga, useGa) {\n    var t = this.tc;\n    c.setTransform(1, 0, 0, 1, 0, 0);\n    c.strokeStyle = this.colour;\n    c.lineWidth = t.outlineThickness;\n    c.shadowBlur = c.shadowOffsetX = c.shadowOffsetY = 0;\n    c.globalAlpha = useGa ? ga : 1;\n    return this.drawFunc(c, this.x, this.y, this.w, this.h, this.colour, tag, x1, y1);\n};\nOproto.DrawPulsate = function (c, tag, x1, y1) {\n    var diff = TimeNow() - this.ts, t = this.tc,\n        ga = t.pulsateTo + ((1 - t.pulsateTo) *\n            (0.5 + (cos(2 * Math.PI * diff / (1000 * t.pulsateTime)) / 2)));\n    this.pulse = ga = TagCanvas.Smooth(1, ga);\n    return this.DrawSimple(c, tag, x1, y1, ga, 1);\n};\nOproto.Active = function (c, x, y) {\n    var a = (x >= this.x && y >= this.y &&\n        x <= this.x + this.w && y <= this.y + this.h);\n    if (a) {\n        this.ts = this.ts || TimeNow();\n    } else {\n        this.ts = null;\n    }\n    return a;\n};\nOproto.PreDraw = Oproto.PostDraw = Oproto.LastDraw = Nop;\n/**\n * @constructor\n */\nfunction Tag(tc, text, a, v, w, h, col, bcol, bradius, boutline, bothickness,\n    font, padding, original) {\n    this.tc = tc;\n    this.image = null;\n    this.text = text;\n    this.text_original = original;\n    this.line_widths = [];\n    this.title = a.title || null;\n    this.a = a;\n    this.position = new Vector(v[0], v[1], v[2]);\n    this.x = this.y = this.z = 0;\n    this.w = w;\n    this.h = h;\n    this.colour = col || tc.textColour;\n    this.bgColour = bcol || tc.bgColour;\n    this.bgRadius = bradius | 0;\n    this.bgOutline = boutline || this.colour;\n    this.bgOutlineThickness = bothickness | 0;\n    this.textFont = font || tc.textFont;\n    this.padding = padding | 0;\n    this.sc = this.alpha = 1;\n    this.weighted = !tc.weight;\n    this.outline = new Outline(tc, this);\n    this.audio = null;\n}\nTproto = Tag.prototype;\nTproto.Init = function (e) {\n    var tc = this.tc;\n    this.textHeight = tc.textHeight;\n    if (this.HasText()) {\n        this.Measure(tc.ctxt, tc);\n    } else {\n        this.w = this.iw;\n        this.h = this.ih;\n    }\n\n    this.SetShadowColour = tc.shadowAlpha ? this.SetShadowColourAlpha : this.SetShadowColourFixed;\n    this.SetDraw(tc);\n};\nTproto.Draw = Nop;\nTproto.HasText = function () {\n    return this.text && this.text[0].length > 0;\n};\nTproto.EqualTo = function (e) {\n    var i = e.getElementsByTagName('img');\n    if (this.a.href != e.href)\n        return 0;\n    if (i.length)\n        return this.image.src == i[0].src;\n    return (e.innerText || e.textContent) == this.text_original;\n};\nTproto.SetImage = function (i) {\n    this.image = this.fimage = i;\n};\nTproto.SetAudio = function (a) {\n    this.audio = a;\n    this.audio.load();\n};\nTproto.SetDraw = function (t) {\n    this.Draw = this.fimage ? (t.ie > 7 ? this.DrawImageIE : this.DrawImage) : this.DrawText;\n    t.noSelect && (this.CheckActive = Nop);\n};\nTproto.MeasureText = function (c) {\n    var i, l = this.text.length, w = 0, wl;\n    for (i = 0; i < l; ++i) {\n        this.line_widths[i] = wl = c.measureText(this.text[i]).width;\n        w = max(w, wl);\n    }\n    return w;\n};\nTproto.Measure = function (c, t) {\n    var extents = FindTextBoundingBox(this.text, this.textFont, this.textHeight),\n        s, th, f, soff, cw, twidth, theight, img, tcv;\n    // add the gap at the top to the height to make equal gap at bottom\n    theight = extents ? extents.max.y + extents.min.y : this.textHeight;\n    c.font = this.font = this.textHeight + 'px ' + this.textFont;\n    twidth = this.MeasureText(c);\n    if (t.txtOpt) {\n        s = t.txtScale;\n        th = s * this.textHeight;\n        f = th + 'px ' + this.textFont;\n        soff = [s * t.shadowOffset[0], s * t.shadowOffset[1]];\n        c.font = f;\n        cw = this.MeasureText(c);\n        tcv = new TextCanvas(this.text, f, cw + s, (s * theight) + s, cw,\n            this.line_widths, t.textAlign, t.textVAlign, s);\n\n        if (this.image)\n            tcv.SetImage(this.image, this.iw, this.ih, t.imagePosition, t.imagePadding,\n                t.imageAlign, t.imageVAlign, t.imageScale);\n\n        img = tcv.Create(this.colour, this.bgColour, this.bgOutline,\n            s * this.bgOutlineThickness, t.shadow, s * t.shadowBlur, soff,\n            s * this.padding, s * this.bgRadius);\n\n        // add outline image using highlight colour\n        if (t.outlineMethod == 'colour') {\n            this.oimage = tcv.Create(this.outline.colour, this.bgColour, this.outline.colour,\n                s * this.bgOutlineThickness, t.shadow, s * t.shadowBlur, soff,\n                s * this.padding, s * this.bgRadius);\n\n        } else if (t.outlineMethod == 'size') {\n            extents = FindTextBoundingBox(this.text, this.textFont,\n                this.textHeight + t.outlineIncrease);\n            th = extents.max.y + extents.min.y;\n            f = (s * (this.textHeight + t.outlineIncrease)) + 'px ' + this.textFont;\n            c.font = f;\n            cw = this.MeasureText(c);\n\n            tcv = new TextCanvas(this.text, f, cw + s, (s * th) + s, cw,\n                this.line_widths, t.textAlign, t.textVAlign, s);\n            if (this.image)\n                tcv.SetImage(this.image, this.iw + t.outlineIncrease,\n                    this.ih + t.outlineIncrease, t.imagePosition, t.imagePadding,\n                    t.imageAlign, t.imageVAlign, t.imageScale);\n\n            this.oimage = tcv.Create(this.colour, this.bgColour, this.bgOutline,\n                s * this.bgOutlineThickness, t.shadow, s * t.shadowBlur, soff,\n                s * this.padding, s * this.bgRadius);\n\n            this.oscale = this.oimage.width / img.width;\n            if (t.outlineIncrease > 0)\n                img = ExpandImage(img, this.oimage.width, this.oimage.height);\n            else\n                this.oimage = ExpandImage(this.oimage, img.width, img.height);\n        }\n        if (img) {\n            this.fimage = img;\n            twidth = this.fimage.width / s;\n            theight = this.fimage.height / s;\n        }\n        this.SetDraw(t);\n        t.txtOpt = !!this.fimage;\n    }\n    this.h = theight;\n    this.w = twidth;\n};\nTproto.SetFont = function (f, c, bc, boc) {\n    this.textFont = f;\n    this.colour = c;\n    this.bgColour = bc;\n    this.bgOutline = boc;\n    this.Measure(this.tc.ctxt, this.tc);\n};\nTproto.SetWeight = function (w) {\n    var tc = this.tc, modes = tc.weightMode.split(/[, ]/), m, s, wl = w.length;\n    if (!this.HasText())\n        return;\n    this.weighted = true;\n    for (s = 0; s < wl; ++s) {\n        m = modes[s] || 'size';\n        if ('both' == m) {\n            this.Weight(w[s], tc.ctxt, tc, 'size', tc.min_weight[s],\n                tc.max_weight[s], s);\n            this.Weight(w[s], tc.ctxt, tc, 'colour', tc.min_weight[s],\n                tc.max_weight[s], s);\n        } else {\n            this.Weight(w[s], tc.ctxt, tc, m, tc.min_weight[s], tc.max_weight[s], s);\n        }\n    }\n    this.Measure(tc.ctxt, tc);\n};\nTproto.Weight = function (w, c, t, m, wmin, wmax, wnum) {\n    w = isNaN(w) ? 1 : w;\n    var nweight = (w - wmin) / (wmax - wmin);\n    if ('colour' == m)\n        this.colour = FindGradientColour(t, nweight, wnum);\n    else if ('bgcolour' == m)\n        this.bgColour = FindGradientColour(t, nweight, wnum);\n    else if ('bgoutline' == m)\n        this.bgOutline = FindGradientColour(t, nweight, wnum);\n    else if ('outline' == m)\n        this.outline.colour = FindGradientColour(t, nweight, wnum);\n    else if ('size' == m) {\n        if (t.weightSizeMin > 0 && t.weightSizeMax > t.weightSizeMin) {\n            this.textHeight = t.weightSize *\n                (t.weightSizeMin + (t.weightSizeMax - t.weightSizeMin) * nweight);\n        } else {\n            // min textHeight of 1\n            this.textHeight = max(1, w * t.weightSize);\n        }\n    }\n};\nTproto.SetShadowColourFixed = function (c, s, a) {\n    c.shadowColor = s;\n};\nTproto.SetShadowColourAlpha = function (c, s, a) {\n    c.shadowColor = SetAlpha(s, a);\n};\nTproto.DrawText = function (c, xoff, yoff) {\n    var t = this.tc, x = this.x, y = this.y, s = this.sc, i, xl;\n    c.globalAlpha = this.alpha;\n    c.fillStyle = this.colour;\n    t.shadow && this.SetShadowColour(c, t.shadow, this.alpha);\n    c.font = this.font;\n    x += xoff / s;\n    y += (yoff / s) - (this.h / 2);\n    for (i = 0; i < this.text.length; ++i) {\n        xl = x;\n        if ('right' == t.textAlign) {\n            xl += this.w / 2 - this.line_widths[i];\n        } else if ('centre' == t.textAlign) {\n            xl -= this.line_widths[i] / 2;\n        } else {\n            xl -= this.w / 2;\n        }\n        c.setTransform(s, 0, 0, s, s * xl, s * y);\n        c.fillText(this.text[i], 0, 0);\n        y += this.textHeight;\n    }\n};\nTproto.DrawImage = function (c, xoff, yoff, im) {\n    var x = this.x, y = this.y, s = this.sc,\n        i = im || this.fimage, w = this.w, h = this.h, a = this.alpha,\n        shadow = this.shadow;\n    c.globalAlpha = a;\n    shadow && this.SetShadowColour(c, shadow, a);\n    x += (xoff / s) - (w / 2);\n    y += (yoff / s) - (h / 2);\n    c.setTransform(s, 0, 0, s, s * x, s * y);\n    c.drawImage(i, 0, 0, w, h);\n};\nTproto.DrawImageIE = function (c, xoff, yoff) {\n    var i = this.fimage, s = this.sc,\n        w = i.width = this.w * s, h = i.height = this.h * s,\n        x = (this.x * s) + xoff - (w / 2), y = (this.y * s) + yoff - (h / 2);\n    c.setTransform(1, 0, 0, 1, 0, 0);\n    c.globalAlpha = this.alpha;\n    c.drawImage(i, x, y);\n};\nTproto.Calc = function (m, a) {\n    var pp, t = this.tc, mnb = t.minBrightness,\n        mxb = t.maxBrightness, r = t.max_radius;\n    pp = m.xform(this.position);\n    this.xformed = pp;\n    pp = Project(t, pp, t.stretchX, t.stretchY);\n    this.x = pp.x;\n    this.y = pp.y;\n    this.z = pp.z;\n    this.sc = pp.w;\n    this.alpha = a * Clamp(mnb + (mxb - mnb) * (r - this.z) / (2 * r), 0, 1);\n    return this.xformed;\n};\nTproto.UpdateActive = function (c, xoff, yoff) {\n    var o = this.outline, w = this.w, h = this.h,\n        x = this.x - w / 2, y = this.y - h / 2;\n    o.Update(x, y, w, h, this.sc, this.z, xoff, yoff);\n    return o;\n};\nTproto.CheckActive = function (c, xoff, yoff) {\n    var t = this.tc, o = this.UpdateActive(c, xoff, yoff);\n    return o.Active(c, t.mx, t.my) ? o : null;\n};\nTproto.Clicked = function (e) {\n    var a = this.a, t = a.target, h = a.href, evt;\n    if (t != '' && t != '_self') {\n        if (self.frames[t]) {\n            self.frames[t].document.location = h;\n        } else {\n            try {\n                if (top.frames[t]) {\n                    top.frames[t].document.location = h;\n                    return;\n                }\n            } catch (err) {\n                // different domain/port/protocol?\n            }\n            window.open(h, t);\n        }\n        return;\n    }\n    if (doc.createEvent) {\n        evt = doc.createEvent('MouseEvents');\n        evt.initMouseEvent('click', 1, 1, window, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, null);\n        if (!a.dispatchEvent(evt))\n            return;\n    } else if (a.fireEvent) {\n        if (!a.fireEvent('onclick'))\n            return;\n    }\n    doc.location = h;\n};\nTproto.StopAudio = function () {\n    this.audio && this.playing && this.audio.pause();\n    this.stopped = 1;\n    this.playing = 0;\n};\nTproto.PlayAudio = function () {\n    if (audio === 'off' || this.tc.audioOff)\n        return;\n    if (!audio && !SetupAudio())\n        return;\n\n    var a = this.tc.audio, g = this.tc.gain, sus = 'suspended', p;\n    if (this.audio) {\n        if (!this.track) {\n            this.track = audio.createMediaElementSource(this.audio);\n            this.gain = audio.createGain();\n            this.track.connect(this.gain);\n            this.gain.connect(audio.destination);\n        }\n        a = this.audio;\n        g = this.gain;\n        if (!a.paused)\n            return 1;\n    }\n\n    if (a) {\n        if (audio.state == sus)\n            audio.resume();\n        if (audio.state == sus)\n            return;\n\n        g.gain.value = min(2, max(0, this.tc.audioVolume * 1));\n        a.currentTime = 0;\n        this.stopped = 0;\n        p = a.play();\n        if (p !== undefined) {\n            p.then(r => {\n                this.stopped ? this.audio.pause() : this.playing = 1;\n            });\n        }\n        return 1;\n    }\n};\n/**\n * @constructor\n */\nfunction TagCanvas(cid, lctr, opt) {\n    var i, p, c = doc.getElementById(cid), cp = ['id', 'class', 'innerHTML'], raf;\n\n    if (!c) throw 0;\n    if (Defined(window.G_vmlCanvasManager)) {\n        c = window.G_vmlCanvasManager.initElement(c);\n        this.ie = parseFloat(navigator.appVersion.split('MSIE')[1]);\n    }\n    if (c && (!c.getContext || !c.getContext('2d').fillText)) {\n        p = doc.createElement('DIV');\n        for (i = 0; i < cp.length; ++i)\n            p[cp[i]] = c[cp[i]];\n        c.parentNode.insertBefore(p, c);\n        c.parentNode.removeChild(c);\n        throw 0;\n    }\n    for (i in TagCanvas.options)\n        this[i] = opt && Defined(opt[i]) ? opt[i] :\n            (Defined(TagCanvas[i]) ? TagCanvas[i] : TagCanvas.options[i]);\n\n    this.canvas = c;\n    this.ctxt = c.getContext('2d');\n    this.z1 = 250 / max(this.depth, 0.001);\n    this.z2 = this.z1 / this.zoom;\n    this.radius = min(c.height, c.width) * 0.0075; // fits radius of 100 in canvas\n    this.max_radius = 100;\n    this.max_weight = [];\n    this.min_weight = [];\n    this.textFont = this.textFont && FixFont(this.textFont);\n    this.textHeight *= 1;\n    this.imageRadius = this.imageRadius.toString();\n    this.pulsateTo = Clamp(this.pulsateTo, 0, 1);\n    this.minBrightness = Clamp(this.minBrightness, 0, 1);\n    this.maxBrightness = Clamp(this.maxBrightness, this.minBrightness, 1);\n    this.ctxt.textBaseline = 'top';\n    this.lx = (this.lock + '').indexOf('x') + 1;\n    this.ly = (this.lock + '').indexOf('y') + 1;\n    this.frozen = this.dx = this.dy = this.fixedAnim = this.touchState = 0;\n    this.fixedAlpha = 1;\n    this.source = lctr || cid;\n    this.repeatTags = min(64, ~~this.repeatTags);\n    this.minTags = min(200, ~~this.minTags);\n    if (~~this.scrollPause > 0)\n        TagCanvas.scrollPause = ~~this.scrollPause;\n    else\n        this.scrollPause = 0;\n    if (this.minTags > 0 && this.repeatTags < 1 && (i = this.GetTags().length))\n        this.repeatTags = ceil(this.minTags / i) - 1;\n    this.transform = Matrix.Identity();\n    this.startTime = this.time = TimeNow();\n    this.mx = this.my = -1;\n    this.centreImage && CentreImage(this);\n    this.Animate = this.dragControl ? this.AnimateDrag : this.AnimatePosition;\n    this.animTiming = (typeof TagCanvas[this.animTiming] == 'function' ?\n        TagCanvas[this.animTiming] : TagCanvas.Smooth);\n    if (this.shadowBlur || this.shadowOffset[0] || this.shadowOffset[1]) {\n        // let the browser translate \"red\" into \"#ff0000\"\n        this.ctxt.shadowColor = this.shadow;\n        this.shadow = this.ctxt.shadowColor;\n        this.shadowAlpha = ShadowAlphaBroken();\n    } else {\n        delete this.shadow;\n    }\n    if (this.activeAudio === false) {\n        audio = 'off';\n    } else {\n        this.activeAudio && this.LoadAudio();\n    }\n    this.Load();\n    if (lctr && this.hideTags) {\n        (function (t) {\n            if (TagCanvas.loaded)\n                t.HideTags();\n            else\n                AddHandler('load', function () { t.HideTags(); }, window);\n        })(this);\n    }\n\n    this.yaw = this.initial ? this.initial[0] * this.maxSpeed : 0;\n    this.pitch = this.initial ? this.initial[1] * this.maxSpeed : 0;\n    if (this.tooltip) {\n        this.ctitle = c.title;\n        c.title = '';\n        if (this.tooltip == 'native') {\n            this.Tooltip = this.TooltipNative;\n        } else {\n            this.Tooltip = this.TooltipDiv;\n            if (!this.ttdiv) {\n                this.ttdiv = doc.createElement('div');\n                this.ttdiv.className = this.tooltipClass;\n                this.ttdiv.style.position = 'absolute';\n                this.ttdiv.style.zIndex = c.style.zIndex + 1;\n                AddHandler('mouseover', function (e) { e.target.style.display = 'none'; }, this.ttdiv);\n                doc.body.appendChild(this.ttdiv);\n            }\n        }\n    } else {\n        this.Tooltip = this.TooltipNone;\n    }\n    if (!this.noMouse && !handlers[cid]) {\n        handlers[cid] = [\n            ['mousemove', MouseMove],\n            ['mouseout', MouseOut],\n            ['mouseup', MouseUp],\n            ['touchstart', TouchDown],\n            ['touchend', TouchUp],\n            ['touchcancel', TouchUp],\n            ['touchmove', TouchMove]\n        ];\n        if (this.dragControl) {\n            handlers[cid].push(['mousedown', MouseDown]);\n            handlers[cid].push(['selectstart', Nop]);\n        }\n        if (this.wheelZoom) {\n            handlers[cid].push(['mousewheel', MouseWheel]);\n            handlers[cid].push(['DOMMouseScroll', MouseWheel]);\n        }\n        if (this.scrollPause) {\n            handlers[cid].push(['scroll', Scroll, window]);\n        }\n        for (i = 0; i < handlers[cid].length; ++i) {\n            p = handlers[cid][i];\n            AddHandler(p[0], p[1], p[2] ? p[2] : c);\n        }\n    }\n    if (!TagCanvas.started) {\n        raf = window.requestAnimationFrame = window.requestAnimationFrame ||\n            window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame ||\n            window.msRequestAnimationFrame;\n        TagCanvas.NextFrame = raf ? TagCanvas.NextFrameRAF :\n            TagCanvas.NextFrameTimeout;\n        TagCanvas.interval = this.interval;\n        TagCanvas.NextFrame(this.interval);\n        TagCanvas.started = 1;\n    }\n}\nTCproto = TagCanvas.prototype;\nTCproto.SourceElements = function () {\n    if (doc.querySelectorAll)\n        return doc.querySelectorAll('#' + this.source);\n    return [doc.getElementById(this.source)];\n};\nTCproto.HideTags = function () {\n    var el = this.SourceElements(), i;\n    for (i = 0; i < el.length; ++i)\n        el[i].style.display = 'none';\n};\nTCproto.GetTags = function () {\n    var el = this.SourceElements(), etl, tl = [], i, j, k;\n    for (k = 0; k <= this.repeatTags; ++k) {\n        for (i = 0; i < el.length; ++i) {\n            etl = el[i].getElementsByTagName('a');\n            for (j = 0; j < etl.length; ++j) {\n                tl.push(etl[j]);\n            }\n        }\n    }\n    return tl;\n};\nTCproto.Message = function (text) {\n    var tl = [], i, p, tc = text.split(''), a, t, x, z;\n    for (i = 0; i < tc.length; ++i) {\n        if (tc[i] != ' ') {\n            p = i - tc.length / 2;\n            a = doc.createElement('A');\n            a.href = '#';\n            a.innerText = tc[i];\n            x = 100 * sin(p / 9);\n            z = -100 * cos(p / 9);\n            t = new Tag(this, tc[i], a, [x, 0, z], 2, 18, '#000', '#fff', 0, 0, 0,\n                'monospace', 2, tc[i]);\n            t.Init();\n            tl.push(t);\n        }\n    }\n    return tl;\n};\nTCproto.AddAudio = function (e, t) {\n    if (audio === 'off')\n        return;\n    var au = e.getElementsByTagName('audio');\n    if (au.length) {\n        t.SetAudio(au[0]);\n        this.hasAudio = 1;\n    }\n};\nTCproto.CreateTag = function (e) {\n    var im, i, t, txt, ts, font, bc, boc, p = [0, 0, 0], au;\n    if ('text' != this.imageMode) {\n        im = e.getElementsByTagName('img');\n        if (im.length) {\n            i = new Image;\n            i.src = im[0].src;\n\n            if (!this.imageMode) {\n                t = new Tag(this, \"\", e, p, 0, 0);\n                t.SetImage(i);\n                //t.Init();\n                AddImage(i, im[0], t, this);\n                this.AddAudio(e, t);\n                return t;\n            }\n        }\n    }\n    if ('image' != this.imageMode) {\n        ts = new TextSplitter(e);\n        txt = ts.Lines();\n        if (!ts.Empty()) {\n            font = this.textFont || FixFont(GetProperty(e, 'font-family'));\n            if (this.splitWidth)\n                txt = ts.SplitWidth(this.splitWidth, this.ctxt, font, this.textHeight);\n\n            bc = this.bgColour == 'tag' ? GetProperty(e, 'background-color') :\n                this.bgColour;\n            boc = this.bgOutline == 'tag' ? GetProperty(e, 'color') : this.bgOutline;\n        } else {\n            ts = null;\n        }\n    }\n    if (ts || i) {\n        t = new Tag(this, txt, e, p, 2, this.textHeight + 2,\n            this.textColour || GetProperty(e, 'color'), bc, this.bgRadius,\n            boc, this.bgOutlineThickness, font, this.padding, ts && ts.original);\n        if (i) {\n            t.SetImage(i);\n            AddImage(i, im[0], t, this);\n        } else {\n            t.Init();\n        }\n        this.AddAudio(e, t);\n        return t;\n    }\n};\nTCproto.UpdateTag = function (t, a) {\n    var colour = this.textColour || GetProperty(a, 'color'),\n        font = this.textFont || FixFont(GetProperty(a, 'font-family')),\n        bc = this.bgColour == 'tag' ? GetProperty(a, 'background-color') :\n            this.bgColour, boc = this.bgOutline == 'tag' ? GetProperty(a, 'color') :\n                this.bgOutline;\n    t.a = a;\n    t.title = a.title;\n    if (t.colour != colour || t.textFont != font || t.bgColour != bc ||\n        t.bgOutline != boc)\n        t.SetFont(font, colour, bc, boc);\n};\nTCproto.Weight = function (tl) {\n    var ll = tl.length, w, i, s, weights = [], valid,\n        wfrom = this.weightFrom ? this.weightFrom.split(/[, ]/) : [null],\n        wl = wfrom.length;\n    for (i = 0; i < ll; ++i) {\n        weights[i] = [];\n        for (s = 0; s < wl; ++s) {\n            w = FindWeight(tl[i].a, wfrom[s], this.textHeight);\n            if (!this.max_weight[s] || w > this.max_weight[s])\n                this.max_weight[s] = w;\n            if (!this.min_weight[s] || w < this.min_weight[s])\n                this.min_weight[s] = w;\n            weights[i][s] = w;\n        }\n    }\n    for (s = 0; s < wl; ++s) {\n        if (this.max_weight[s] > this.min_weight[s])\n            valid = 1;\n    }\n    if (valid) {\n        for (i = 0; i < ll; ++i) {\n            tl[i].SetWeight(weights[i]);\n        }\n    }\n};\nTCproto.Load = function () {\n    var tl = this.GetTags(), taglist = [], shape, t,\n        shapeArgs, rx, ry, rz, vl, i, tagmap = [], pfuncs = {\n            sphere: PointsOnSphere,\n            vcylinder: PointsOnCylinderV,\n            hcylinder: PointsOnCylinderH,\n            vring: PointsOnRingV,\n            hring: PointsOnRingH\n        };\n\n    if (tl.length) {\n        tagmap.length = tl.length;\n        for (i = 0; i < tl.length; ++i)\n            tagmap[i] = i;\n        this.shuffleTags && Shuffle(tagmap);\n        rx = 100 * this.radiusX;\n        ry = 100 * this.radiusY;\n        rz = 100 * this.radiusZ;\n        this.max_radius = max(rx, max(ry, rz));\n\n        for (i = 0; i < tl.length; ++i) {\n            t = this.CreateTag(tl[tagmap[i]]);\n            if (t)\n                taglist.push(t);\n        }\n        this.weight && this.Weight(taglist, true);\n\n        if (this.shapeArgs) {\n            this.shapeArgs[0] = taglist.length;\n        } else {\n            shapeArgs = this.shape.toString().split(/[(),]/);\n            shape = shapeArgs.shift();\n            if (typeof window[shape] === 'function')\n                this.shape = window[shape];\n            else\n                this.shape = pfuncs[shape] || pfuncs.sphere;\n            this.shapeArgs = [taglist.length, rx, ry, rz].concat(shapeArgs);\n        }\n        vl = this.shape.apply(this, this.shapeArgs);\n        this.listLength = taglist.length;\n        for (i = 0; i < taglist.length; ++i)\n            taglist[i].position = new Vector(vl[i][0], vl[i][1], vl[i][2]);\n    }\n    if (this.noTagsMessage && !taglist.length) {\n        i = (this.imageMode && this.imageMode != 'both' ? this.imageMode + ' ' : '');\n        taglist = this.Message('No ' + i + 'tags');\n    }\n    this.taglist = taglist;\n};\nTCproto.Update = function () {\n    var tl = this.GetTags(), newlist = [],\n        taglist = this.taglist, found,\n        added = [], removed = [], vl, ol, nl, i, j;\n\n    if (!this.shapeArgs)\n        return this.Load();\n\n    if (tl.length) {\n        nl = this.listLength = tl.length;\n        ol = taglist.length;\n\n        // copy existing list, populate \"removed\"\n        for (i = 0; i < ol; ++i) {\n            newlist.push(taglist[i]);\n            removed.push(i);\n        }\n\n        // find added and removed tags\n        for (i = 0; i < nl; ++i) {\n            for (j = 0, found = 0; j < ol; ++j) {\n                if (taglist[j].EqualTo(tl[i])) {\n                    this.UpdateTag(newlist[j], tl[i]);\n                    found = removed[j] = -1;\n                }\n            }\n            if (!found)\n                added.push(i);\n        }\n\n        // clean out found tags from removed list\n        for (i = 0, j = 0; i < ol; ++i) {\n            if (removed[j] == -1)\n                removed.splice(j, 1);\n            else\n                ++j;\n        }\n\n        // insert new tags in gaps where old tags removed\n        if (removed.length) {\n            Shuffle(removed);\n            while (removed.length && added.length) {\n                i = removed.shift();\n                j = added.shift();\n                newlist[i] = this.CreateTag(tl[j]);\n            }\n\n            // remove any more (in reverse order)\n            removed.sort(function (a, b) { return a - b });\n            while (removed.length) {\n                newlist.splice(removed.pop(), 1);\n            }\n        }\n\n        // add any extra tags\n        j = newlist.length / (added.length + 1);\n        i = 0;\n        while (added.length) {\n            newlist.splice(ceil(++i * j), 0, this.CreateTag(tl[added.shift()]));\n        }\n\n        // assign correct positions to tags\n        this.shapeArgs[0] = nl = newlist.length;\n        vl = this.shape.apply(this, this.shapeArgs);\n        for (i = 0; i < nl; ++i)\n            newlist[i].position = new Vector(vl[i][0], vl[i][1], vl[i][2]);\n\n        // reweight tags\n        this.weight && this.Weight(newlist);\n    }\n    this.taglist = newlist;\n};\nTCproto.SetShadow = function (c) {\n    c.shadowBlur = this.shadowBlur;\n    c.shadowOffsetX = this.shadowOffset[0];\n    c.shadowOffsetY = this.shadowOffset[1];\n};\nTCproto.LoadAudio = function () {\n    if (!audio && !SetupAudio())\n        return;\n    this.audio = doc.createElement('audio');\n    this.audio.src = this.activeAudio;\n    this.track = audio.createMediaElementSource(this.audio);\n    this.gain = audio.createGain();\n    this.track.connect(this.gain);\n    this.gain.connect(audio.destination);\n    this.hasAudio = 1;\n    audioClick = function (e) {\n        audio.resume();\n        doc.removeEventListener('click', audioClick);\n    };\n    doc.addEventListener('click', audioClick);\n};\nTCproto.ShowAudioIcon = function () {\n    var s = this.audioIconSize, cv = this.canvas, c = this.ctxt,\n        x = cv.width - s - 3, y = cv.height - s - 3, t = this.audioIconThickness,\n        c1 = '#000', c2 = '#fff', d = this.audioIconDark, muted = this.audioOff,\n        sus = 'suspended';\n    if (!audio)\n        return;\n    if (!muted)\n        muted = (audio.state === sus);\n\n    if (this.audioIcon && this.hasAudio) {\n        AudioIcon(muted, c, s, x, y, t + 1, d ? c2 : c1);\n        AudioIcon(muted, c, s, x, y, t, d ? c1 : c2);\n    }\n};\nTCproto.CheckAudioIcon = function () {\n    var s = this.audioIconSize, cv = this.canvas, t = this.audioIconThickness / 2,\n        x = cv.width - s - 3 - t, y = cv.height - s - 3 - t;\n    if (this.audioIcon && this.mx >= x && this.my >= y)\n        return true;\n};\nTCproto.ToggleAudio = function () {\n    var on = this.audioOff || (audio && audio.state === 'suspended');\n    on || this.currentAudio && this.currentAudio.StopAudio();\n    this.audioOff = !on;\n};\nTCproto.Draw = function (t) {\n    if (this.paused)\n        return;\n    var cv = this.canvas, cw = cv.width, ch = cv.height, max_sc = 0,\n        tdelta = (t - this.time) * TagCanvas.interval / 1000,\n        x = cw / 2 + this.offsetX, y = ch / 2 + this.offsetY, c = this.ctxt,\n        active, a, i, aindex = -1, tl = this.taglist, l = tl.length,\n        last = this.active && this.active.tag, cursor = '',\n        frontsel = this.frontSelect, centreDrawn = (this.centreFunc == Nop), fixed;\n    this.time = t;\n    if (this.frozen && this.drawn)\n        return this.Animate(cw, ch, tdelta);\n    fixed = this.AnimateFixed();\n    c.setTransform(1, 0, 0, 1, 0, 0);\n    for (i = 0; i < l; ++i)\n        tl[i].Calc(this.transform, this.fixedAlpha);\n    tl = SortList(tl, function (a, b) { return b.z - a.z });\n\n    if (fixed && this.fixedAnim.active) {\n        active = this.fixedAnim.tag.UpdateActive(c, x, y);\n    } else {\n        this.active = null;\n        if (this.CheckAudioIcon()) {\n            cursor = 'pointer';\n        } else {\n            for (i = 0; i < l; ++i) {\n                a = this.mx >= 0 && this.my >= 0 && this.taglist[i].CheckActive(c, x, y);\n                if (a && a.sc > max_sc && (!frontsel || a.z <= 0)) {\n                    active = a;\n                    aindex = i;\n                    active.tag = this.taglist[i];\n                    max_sc = a.sc;\n                }\n            }\n            this.active = active;\n        }\n    }\n\n    this.txtOpt || (this.shadow && this.SetShadow(c));\n    c.clearRect(0, 0, cw, ch);\n    for (i = 0; i < l; ++i) {\n        if (!centreDrawn && tl[i].z <= 0) {\n            // run the centreFunc if the next tag is at the front\n            try { this.centreFunc(c, cw, ch, x, y); }\n            catch (e) {\n                alert(e);\n                // don't run it again\n                this.centreFunc = Nop;\n            }\n            centreDrawn = true;\n        }\n\n        if (!(active && active.tag == tl[i] && active.PreDraw(c, tl[i], x, y)))\n            tl[i].Draw(c, x, y);\n        active && active.tag == tl[i] && active.PostDraw(c);\n    }\n    if (this.freezeActive && active) {\n        this.Freeze();\n    } else {\n        this.UnFreeze();\n        this.drawn = (l == this.listLength);\n    }\n    if (this.fixedCallback) {\n        this.fixedCallback(this, this.fixedCallbackTag);\n        this.fixedCallback = null;\n    }\n    fixed || this.Animate(cw, ch, tdelta);\n    if (active) {\n        active.LastDraw(c);\n        if (active.tag != last) {\n            this.currentAudio && this.currentAudio != active.tag && this.currentAudio.StopAudio();\n            if (active.tag.PlayAudio())\n                this.currentAudio = active.tag;\n        }\n        cursor = this.activeCursor;\n    }\n    cv.style.cursor = cursor;\n    this.Tooltip(active, this.taglist[aindex]);\n    this.audioIcon && this.ShowAudioIcon();\n};\nTCproto.TooltipNone = function () { };\nTCproto.TooltipNative = function (active, tag) {\n    if (active)\n        this.canvas.title = tag && tag.title ? tag.title : '';\n    else\n        this.canvas.title = this.ctitle;\n};\nTCproto.SetTTDiv = function (title, tag) {\n    var tc = this, s = tc.ttdiv.style;\n    if (title != tc.ttdiv.innerHTML)\n        s.display = 'none';\n    tc.ttdiv.innerHTML = title;\n    tag && (tag.title = tc.ttdiv.innerHTML);\n    if (s.display == 'none' && !tc.tttimer) {\n        tc.tttimer = setTimeout(function () {\n            var p = AbsPos(tc.canvas.id);\n            s.display = 'block';\n            s.left = p.x + tc.mx + 'px';\n            s.top = p.y + tc.my + 24 + 'px';\n            tc.tttimer = null;\n        }, tc.tooltipDelay);\n    }\n};\nTCproto.TooltipDiv = function (active, tag) {\n    if (active && tag && tag.title) {\n        this.SetTTDiv(tag.title, tag);\n    } else if (!active && this.mx != -1 && this.my != -1 && this.ctitle.length) {\n        this.SetTTDiv(this.ctitle);\n    } else {\n        this.ttdiv.style.display = 'none';\n    }\n};\nTCproto.Transform = function (tc, p, y) {\n    if (p || y) {\n        var sp = sin(p), cp = cos(p), sy = sin(y), cy = cos(y),\n            ym = new Matrix([cy, 0, sy, 0, 1, 0, -sy, 0, cy]),\n            pm = new Matrix([1, 0, 0, 0, cp, -sp, 0, sp, cp]);\n        tc.transform = tc.transform.mul(ym.mul(pm));\n    }\n};\nTCproto.AnimateFixed = function () {\n    var fa, t1, angle, m, d;\n    if (this.fadeIn) {\n        t1 = TimeNow() - this.startTime;\n        if (t1 >= this.fadeIn) {\n            this.fadeIn = 0;\n            this.fixedAlpha = 1;\n        } else {\n            this.fixedAlpha = t1 / this.fadeIn;\n        }\n    }\n    if (this.fixedAnim) {\n        if (!this.fixedAnim.transform)\n            this.fixedAnim.transform = this.transform;\n        fa = this.fixedAnim, t1 = TimeNow() - fa.t0, angle = fa.angle,\n            m, d = this.animTiming(fa.t, t1);\n        this.transform = fa.transform;\n        if (t1 >= fa.t) {\n            this.fixedCallbackTag = fa.tag;\n            this.fixedCallback = fa.cb;\n            this.fixedAnim = this.yaw = this.pitch = 0;\n        } else {\n            angle *= d;\n        }\n        m = Matrix.Rotation(angle, fa.axis);\n        this.transform = this.transform.mul(m);\n        return (this.fixedAnim != 0);\n    }\n    return false;\n};\nTCproto.AnimatePosition = function (w, h, t) {\n    var tc = this, x = tc.mx, y = tc.my, s, r;\n    if (!tc.frozen && x >= 0 && y >= 0 && x < w && y < h) {\n        s = tc.maxSpeed, r = tc.reverse ? -1 : 1;\n        tc.lx || (tc.yaw = ((x * 2 * s / w) - s) * r * t);\n        tc.ly || (tc.pitch = ((y * 2 * s / h) - s) * -r * t);\n        tc.initial = null;\n    } else if (!tc.initial) {\n        if (tc.frozen && !tc.freezeDecel)\n            tc.yaw = tc.pitch = 0;\n        else\n            tc.Decel(tc);\n    }\n    this.Transform(tc, tc.pitch, tc.yaw);\n};\nTCproto.AnimateDrag = function (w, h, t) {\n    var tc = this, rs = 100 * t * tc.maxSpeed / tc.max_radius / tc.zoom;\n    if (tc.dx || tc.dy) {\n        tc.lx || (tc.yaw = tc.dx * rs / tc.stretchX);\n        tc.ly || (tc.pitch = tc.dy * -rs / tc.stretchY);\n        tc.dx = tc.dy = 0;\n        tc.initial = null;\n    } else if (!tc.initial) {\n        tc.Decel(tc);\n    }\n    this.Transform(tc, tc.pitch, tc.yaw);\n};\nTCproto.Freeze = function () {\n    if (!this.frozen) {\n        this.preFreeze = [this.yaw, this.pitch];\n        this.frozen = 1;\n        this.drawn = 0;\n    }\n};\nTCproto.UnFreeze = function () {\n    if (this.frozen) {\n        this.yaw = this.preFreeze[0];\n        this.pitch = this.preFreeze[1];\n        this.frozen = 0;\n    }\n};\nTCproto.Decel = function (tc) {\n    var s = tc.minSpeed, ay = abs(tc.yaw), ap = abs(tc.pitch);\n    if (!tc.lx && ay > s)\n        tc.yaw = ay > tc.z0 ? tc.yaw * tc.decel : 0;\n    if (!tc.ly && ap > s)\n        tc.pitch = ap > tc.z0 ? tc.pitch * tc.decel : 0;\n};\nTCproto.Zoom = function (r) {\n    this.z2 = this.z1 * (1 / r);\n    this.drawn = 0;\n};\nTCproto.Clicked = function (e) {\n    if (this.CheckAudioIcon()) {\n        this.ToggleAudio();\n        return;\n    }\n    var a = this.active;\n    try {\n        if (a && a.tag)\n            if (this.clickToFront === false || this.clickToFront === null)\n                a.tag.Clicked(e);\n            else\n                this.TagToFront(a.tag, this.clickToFront, function () {\n                    a.tag.Clicked(e);\n                }, true);\n    } catch (ex) {\n    }\n};\nTCproto.Wheel = function (i) {\n    var z = this.zoom + this.zoomStep * (i ? 1 : -1);\n    this.zoom = min(this.zoomMax, max(this.zoomMin, z));\n    this.Zoom(this.zoom);\n};\nTCproto.BeginDrag = function (e) {\n    this.down = EventXY(e, this.canvas);\n    e.cancelBubble = true;\n    e.returnValue = false;\n    e.preventDefault && e.preventDefault();\n};\nTCproto.Drag = function (e, p) {\n    if (this.dragControl && this.down) {\n        var t2 = this.dragThreshold * this.dragThreshold,\n            dx = p.x - this.down.x, dy = p.y - this.down.y;\n        if (this.dragging || dx * dx + dy * dy > t2) {\n            this.dx = dx;\n            this.dy = dy;\n            this.dragging = 1;\n            this.down = p;\n        }\n    }\n    return this.dragging;\n};\nTCproto.EndDrag = function () {\n    var res = this.dragging;\n    this.dragging = this.down = null;\n    return res;\n};\nfunction PinchDistance(e) {\n    var t1 = e.targetTouches[0], t2 = e.targetTouches[1];\n    return sqrt(pow(t2.pageX - t1.pageX, 2) + pow(t2.pageY - t1.pageY, 2));\n}\nTCproto.BeginPinch = function (e) {\n    this.pinched = [PinchDistance(e), this.zoom];\n    e.preventDefault && e.preventDefault();\n};\nTCproto.Pinch = function (e) {\n    var z, d, p = this.pinched;\n    if (!p)\n        return;\n    d = PinchDistance(e);\n    z = p[1] * d / p[0];\n    this.zoom = min(this.zoomMax, max(this.zoomMin, z));\n    this.Zoom(this.zoom);\n};\nTCproto.EndPinch = function (e) {\n    this.pinched = null;\n};\nTCproto.Pause = function () { this.paused = true; };\nTCproto.Resume = function () { this.paused = false; };\nTCproto.SetSpeed = function (i) {\n    this.initial = i;\n    this.yaw = i[0] * this.maxSpeed;\n    this.pitch = i[1] * this.maxSpeed;\n};\nTCproto.FindTag = function (t) {\n    if (!Defined(t))\n        return null;\n    Defined(t.index) && (t = t.index);\n    if (!IsObject(t))\n        return this.taglist[t];\n    var srch, tgt, i;\n    if (Defined(t.id))\n        srch = 'id', tgt = t.id;\n    else if (Defined(t.text))\n        srch = 'innerText', tgt = t.text;\n\n    for (i = 0; i < this.taglist.length; ++i)\n        if (this.taglist[i].a[srch] == tgt)\n            return this.taglist[i];\n};\nTCproto.RotateTag = function (tag, lt, lg, time, callback, active) {\n    var t = tag.Calc(this.transform, 1), v1 = new Vector(t.x, t.y, t.z),\n        v2 = MakeVector(lg, lt), angle = v1.angle(v2), u = v1.cross(v2).unit();\n    if (angle == 0) {\n        this.fixedCallbackTag = tag;\n        this.fixedCallback = callback;\n    } else {\n        this.fixedAnim = {\n            angle: -angle,\n            axis: u,\n            t: time,\n            t0: TimeNow(),\n            cb: callback,\n            tag: tag,\n            active: active\n        };\n    }\n};\nTCproto.TagToFront = function (tag, time, callback, active) {\n    this.RotateTag(tag, 0, 0, time, callback, active);\n};\nTCproto.Volume = function (vol) {\n    this.audioVolume = vol * 1;\n};\nTagCanvas.Start = function (id, l, o) {\n    TagCanvas.Delete(id);\n    TagCanvas.tc[id] = new TagCanvas(id, l, o);\n};\nfunction tccall(f, id) {\n    TagCanvas.tc[id] && TagCanvas.tc[id][f]();\n}\nTagCanvas.Linear = function (t, t0) { return t0 / t; }\nTagCanvas.Smooth = function (t, t0) { return 0.5 - cos(t0 * Math.PI / t) / 2; }\nTagCanvas.Pause = function (id) { tccall('Pause', id); };\nTagCanvas.Resume = function (id) { tccall('Resume', id); };\nTagCanvas.Reload = function (id) { tccall('Load', id); };\nTagCanvas.Update = function (id) { tccall('Update', id); };\nTagCanvas.SetSpeed = function (id, speed) {\n    if (IsObject(speed) && TagCanvas.tc[id] &&\n        !isNaN(speed[0]) && !isNaN(speed[1])) {\n        TagCanvas.tc[id].SetSpeed(speed);\n        return true;\n    }\n    return false;\n};\nTagCanvas.TagToFront = function (id, options) {\n    if (!IsObject(options))\n        return false;\n    options.lat = options.lng = 0;\n    return TagCanvas.RotateTag(id, options);\n};\nTagCanvas.RotateTag = function (id, options) {\n    if (IsObject(options) && TagCanvas.tc[id]) {\n        if (isNaN(options.time))\n            options.time = 500;\n        var tt = TagCanvas.tc[id].FindTag(options);\n        if (tt) {\n            TagCanvas.tc[id].RotateTag(tt, options.lat, options.lng,\n                options.time, options.callback, options.active);\n            return true;\n        }\n    }\n    return false;\n};\nTagCanvas.Delete = function (id) {\n    var i, c;\n    if (handlers[id]) {\n        c = doc.getElementById(id);\n        if (c) {\n            for (i = 0; i < handlers[id].length; ++i)\n                RemoveHandler(handlers[id][i][0], handlers[id][i][1], c);\n        }\n    }\n    delete handlers[id];\n    delete TagCanvas.tc[id];\n};\nTagCanvas.NextFrameRAF = function () {\n    requestAnimationFrame(DrawCanvasRAF);\n};\nTagCanvas.NextFrameTimeout = function (iv) {\n    setTimeout(DrawCanvas, iv);\n};\nTagCanvas.tc = {};\nTagCanvas.options = {\n    z1: 20000,\n    z2: 20000,\n    z0: 0.0002,\n    freezeActive: false,\n    freezeDecel: false,\n    activeCursor: 'pointer',\n    pulsateTo: 1,\n    pulsateTime: 3,\n    reverse: false,\n    depth: 0.5,\n    maxSpeed: 0.05,\n    minSpeed: 0,\n    decel: 0.95,\n    interval: 20,\n    minBrightness: 0.1,\n    maxBrightness: 1,\n    outlineColour: '#ffff99',\n    outlineThickness: 2,\n    outlineOffset: 5,\n    outlineMethod: 'outline',\n    outlineRadius: 0,\n    textColour: '#ff99ff',\n    textHeight: 15,\n    textFont: 'Helvetica, Arial, sans-serif',\n    shadow: '#000',\n    shadowBlur: 0,\n    shadowOffset: [0, 0],\n    initial: null,\n    hideTags: true,\n    zoom: 1,\n    weight: false,\n    weightMode: 'size',\n    weightFrom: null,\n    weightSize: 1,\n    weightSizeMin: null,\n    weightSizeMax: null,\n    weightGradient: { 0: '#f00', 0.33: '#ff0', 0.66: '#0f0', 1: '#00f' },\n    txtOpt: true,\n    txtScale: 2,\n    frontSelect: false,\n    wheelZoom: true,\n    zoomMin: 0.3,\n    zoomMax: 3,\n    zoomStep: 0.05,\n    shape: 'sphere',\n    lock: null,\n    tooltip: null,\n    tooltipDelay: 300,\n    tooltipClass: 'tctooltip',\n    radiusX: 1,\n    radiusY: 1,\n    radiusZ: 1,\n    stretchX: 1,\n    stretchY: 1,\n    offsetX: 0,\n    offsetY: 0,\n    shuffleTags: false,\n    noSelect: false,\n    noMouse: false,\n    imageScale: 1,\n    paused: false,\n    dragControl: false,\n    dragThreshold: 4,\n    centreFunc: Nop,\n    splitWidth: 0,\n    animTiming: 'Smooth',\n    clickToFront: false,\n    fadeIn: 0,\n    padding: 0,\n    bgColour: null,\n    bgRadius: 0,\n    bgOutline: null,\n    bgOutlineThickness: 0,\n    outlineIncrease: 4,\n    textAlign: 'centre',\n    textVAlign: 'middle',\n    imageMode: null,\n    imagePosition: null,\n    imagePadding: 2,\n    imageAlign: 'centre',\n    imageVAlign: 'middle',\n    noTagsMessage: true,\n    centreImage: null,\n    pinchZoom: false,\n    repeatTags: 0,\n    minTags: 0,\n    imageRadius: 0,\n    scrollPause: false,\n    outlineDash: 0,\n    outlineDashSpace: 0,\n    outlineDashSpeed: 1,\n    activeAudio: '',\n    audioVolume: 1,\n    audioIcon: 1,\n    audioIconSize: 20,\n    audioIconThickness: 2,\n    audioIconDark: 0\n};\nfor (i in TagCanvas.options) TagCanvas[i] = TagCanvas.options[i];\n\n\nexport default TagCanvas;","\n/*\n * @FORM: KALT\n * @Description: 无\n */\n// import TagCanvas from './src/tagCanvas.min.js'\nimport TagCanvas from './src/tagCanvas.js'\n\nexport default TagCanvas","/*\r\n * @Author: LYM\r\n * @Date: 2023-05-16 14:49:35\r\n * @LastEditors: LYM\r\n * @LastEditTime: 2023-05-16 15:55:05\r\n * @Description: 配置\r\n */\r\nexport const defaultOption = {\r\n  shape: 'sphere',\r\n  interval: 20,\r\n  decel: 0.98,\r\n  maxSpeed: 0.02, // 添加最大的运动速度\r\n  minSpeed: 0.01, // 添加最小的运动速度这样就可以保证一直运动，不会停止\r\n  textHeight: 25,\r\n  outlineMethod: 'none', // tag hover 之后的 轮廓效果\r\n  fadeIn: 800,\r\n  outlineColour: '#f96',\r\n  outlineThickness: 2,\r\n  outlineOffset: 4,\r\n  depth: 0.92,\r\n  minBrightness: 0.2,\r\n  reverse: true, // 运动方向与鼠标移动方向相反\r\n  shadowBlur: 0,\r\n  shuffleTags: true, // 打乱标签\r\n  shadowOffset: [0, 0],\r\n  stretchX: 1, // Stretch or compress the cloud horizontally. 水平拉伸词云\r\n  initial: [0.1, 0.1], // 给词云添加一个初始的运动方向\r\n  textFont: null, // 字体设置为 null 就会继承 每个 tag的a 标签的字体\r\n  textColour: null, // 字体颜色设置为 null 就会继承 每个 tag的a 标签的字体颜色\r\n  weight: true, // weight 打开，就可以根据默认的字体的大小作为权重，对tag 的样式进行调整\r\n  weightMode: 'size', // 样式调整的方式\r\n  weightSize: 0.5, // 调整 tag 字体的大小，加个 权重\r\n  weightSizeMax: 25,\r\n  weightSizeMin: 14,\r\n  weightFrom: 'data-weight',\r\n  wheelZoom: true, // 允许使用鼠标滚轮或滚动手势放大和缩小。\r\n  zoomMax: 3, // 最大缩放值。\r\n  zoomMin: 0.8, // 最小缩放值。\r\n  zoomStep: 0.05, // 每次移动鼠标滚轮时缩放变化的量。\r\n  tooltip: 'div',\r\n  tooltipClass: 'tc-tooltip',\r\n  freezeActive: true, // 设置为true，当标记高亮显示时暂停移动。\r\n}\r\n\r\nexport const defaultColor = [\r\n  '#16CAC2',\r\n  '#E79B2E',\r\n  '#16CAC2',\r\n  '#4391FC',\r\n  '#8F4DFF',\r\n  '#4A9452',\r\n  '#FF9C00',\r\n  '#3AC371',\r\n  '#FB5D60',\r\n]","\r\nimport {\r\n  defineComponent,\r\n  reactive,\r\n  PropType,\r\n  onMounted,\r\n  watch,\r\n  nextTick,\r\n} from \"vue\";\r\nimport TagCanvas from \"tag-canvas\";\r\nimport { defaultOption, defaultColor } from \"./hooks\";\r\n\r\nexport default defineComponent({\r\n  name: \"EkrDynamicWordClouds\",\r\n  props: {\r\n    data: {\r\n      required: true,\r\n      type: Object as PropType<{ name: string; value: number }[]>,\r\n    },\r\n    canvasId: {\r\n      type: String,\r\n      default: \"world-cloud-canvas\",\r\n    },\r\n    labelLength: {\r\n      type: Number,\r\n      default: 8,\r\n    },\r\n    colorList: {\r\n      type: Array as any,\r\n      default: () => defaultColor,\r\n    },\r\n    showValue: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    showTooltips: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    option: {\r\n      type: Object as any,\r\n      default: () => {},\r\n    },\r\n  },\r\n  components: {},\r\n  setup(props, { emit }) {\r\n    const state = reactive({\r\n      containerRef: null as HTMLDivElement | null,\r\n      canvasWidth: 0,\r\n      canvasHeight: 0,\r\n    });\r\n\r\n    onMounted(() => {\r\n      if (state.containerRef) {\r\n        state.canvasWidth = state.containerRef?.clientWidth;\r\n        state.canvasHeight = state.containerRef?.clientHeight;\r\n      }\r\n\r\n      // 绘制tagCanvas\r\n      nextTick(() => {\r\n        startWorldCloud();\r\n      });\r\n    });\r\n\r\n    // 启动词云\r\n    const startWorldCloud = (updateFlag?: boolean | undefined) => {\r\n      createTagListDom();\r\n      let o = {\r\n        ...defaultOption,\r\n        ...props.option, // 自定义配置\r\n      };\r\n\r\n      try {\r\n        // 如果不是更新，说明是第一次渲染，就启动 tagCanvas, 否则就代表更新\r\n        if (!updateFlag) {\r\n          TagCanvas.Start(props.canvasId, \"weightTags\", o);\r\n        } else {\r\n          TagCanvas.Update(props.canvasId);\r\n        }\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    };\r\n\r\n    // 根据父组件传过来的 data 创建 TagList Dom列表，放到页面中供，canvas 渲染\r\n    // data数据中每一项结构是一个对象 { name: 要展示的tag名字， value: 权重}\r\n    const createTagListDom = () => {\r\n      const colorList = props.colorList;\r\n      let res = [...props.data];\r\n      const len = res.length;\r\n      let fragment = new DocumentFragment();\r\n      for (let i = 0; i < len; i++) {\r\n        let a = document.createElement(\"a\");\r\n        // 字符串长度大于labelLength就要换行\r\n        const len = res[i].name.length;\r\n        if (len > props.labelLength) {\r\n          let charArr = res[i].name.split(\"\");\r\n          const temp = charArr.splice(0, props.labelLength);\r\n          a.innerHTML =\r\n            len > props.labelLength ? temp.join(\"\") + \"...\" : temp.join(\"\");\r\n        } else {\r\n          a.innerHTML = res[i].name;\r\n        }\r\n        a.href = \"javascript:;return\";\r\n        a.style.color = colorList[i % colorList.length];\r\n        a.title =\r\n          `${res[i].name}` + (props.showValue ? `（${res[i].value}）` : \"\");\r\n\r\n        if (res[i].value) {\r\n          a.dataset.weight = res[i].value + \"\";\r\n        }\r\n\r\n        // 点击事件\r\n        a.onclick = function (e) {\r\n          emit(\"cloud-click\", res[i]);\r\n          e.stopPropagation();\r\n        };\r\n\r\n        fragment.append(a);\r\n      }\r\n      // 更新 tagContainer中的 tag元素\r\n      let tagsContainer = document.querySelector(\"#weightTags\");\r\n      if (tagsContainer) {\r\n        tagsContainer.innerHTML = \"\";\r\n        tagsContainer.append(fragment);\r\n      }\r\n    };\r\n\r\n    watch(\r\n      () => props.data,\r\n      () => {\r\n        startWorldCloud(true);\r\n      },\r\n      {\r\n        deep: true,\r\n      }\r\n    );\r\n\r\n    return {\r\n      state,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./index.vue?vue&type=template&id=7e5ebea8&scoped=true&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=7e5ebea8&lang=scss&scoped=true\"\nimport \"./index.vue?vue&type=style&index=1&id=7e5ebea8&lang=scss\"\n\nimport exportComponent from \"D:\\\\practice-code\\\\tag-canvas-dynamic-word-cloud\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7e5ebea8\"]])\n\nexport default __exports__","/*\r\n * @Author: LYM\r\n * @Date: 2023-05-15 17:16:17\r\n * @LastEditors: LYM\r\n * @LastEditTime: 2023-05-16 14:44:39\r\n * @Description: 注册组件\r\n */\r\nimport { App } from \"vue\";\r\nimport DynamicWordCloudTagCanvas from \"./index.vue\";\r\n\r\n// 定义 install 方法， App 作为参数\r\nDynamicWordCloudTagCanvas.install = (app: App): void => {\r\n  app.component(\r\n    DynamicWordCloudTagCanvas.name as string,\r\n    DynamicWordCloudTagCanvas\r\n  );\r\n};\r\n\r\nexport default DynamicWordCloudTagCanvas;\r\n","/*\r\n * @Author: LYM\r\n * @Date: 2023-02-04 14:31:17\r\n * @LastEditors: LYM\r\n * @LastEditTime: 2023-05-16 14:44:53\r\n * @Description: 组件导出\r\n */\r\n\r\nimport { App } from \"vue\";\r\nimport DynamicWordCloudTagCanvas from \"./dynamic-word-cloud\";\r\n\r\n// 所有组件列表\r\nconst components = [DynamicWordCloudTagCanvas] as any;\r\n\r\n// 定义 install 方法， App 作为参数\r\nconst install = (app: App): void => {\r\n  // 遍历注册所有组件\r\n  components.map((component: { name: any }) =>\r\n    app.component(component.name, component)\r\n  );\r\n};\r\n\r\nexport { DynamicWordCloudTagCanvas };\r\n\r\nexport default {\r\n  install,\r\n};\r\n","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n"],"sourceRoot":""}